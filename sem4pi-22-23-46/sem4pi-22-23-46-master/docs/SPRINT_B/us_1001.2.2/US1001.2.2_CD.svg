<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1347.5px" preserveAspectRatio="none" style="width:1390px;height:1347px;background:#FFFFFF;" version="1.1" viewBox="0 0 1390 1347" width="1390.2px" zoomAndPan="magnify"><defs/><g><!--MD5=[3dcf69e4e87a10af00fce8354034ba4c]
cluster presentation--><g id="cluster_presentation"><path d="M257.95,4.2 L321.65,4.2 A2.625,2.625 0 0 1 323.4,5.95 L328.3,20.7266 L460.25,20.7266 A1.75,1.75 0 0 1 462,22.4766 L462,104.65 A1.75,1.75 0 0 1 460.25,106.4 L257.95,106.4 A1.75,1.75 0 0 1 256.2,104.65 L256.2,5.95 A1.75,1.75 0 0 1 257.95,4.2 " fill="#DDDDDD" style="stroke:#000000;stroke-width:1.0499999999999998;"/><line style="stroke:#000000;stroke-width:1.0499999999999998;" x1="256.2" x2="328.3" y1="20.7266" y2="20.7266"/><text fill="#000000" font-family="sans-serif" font-size="9.8" font-weight="bold" lengthAdjust="spacing" textLength="63" x="259" y="15.7732">presentation</text></g><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><g id="cluster_domain"><path d="M714.35,545.3 L750.75,545.3 A2.625,2.625 0 0 1 752.5,547.05 L757.4,561.8266 L1226.75,561.8266 A1.75,1.75 0 0 1 1228.5,563.5766 L1228.5,1340.85 A1.75,1.75 0 0 1 1226.75,1342.6 L714.35,1342.6 A1.75,1.75 0 0 1 712.6,1340.85 L712.6,547.05 A1.75,1.75 0 0 1 714.35,545.3 " fill="#DBD8AE" style="stroke:#000000;stroke-width:1.0499999999999998;"/><line style="stroke:#000000;stroke-width:1.0499999999999998;" x1="712.6" x2="757.4" y1="561.8266" y2="561.8266"/><text fill="#000000" font-family="sans-serif" font-size="9.8" font-weight="bold" lengthAdjust="spacing" textLength="35.7" x="715.4" y="556.8732">domain</text></g><!--MD5=[0334151241c2df87d13997940bbf650c]
cluster persistence--><g id="cluster_persistence"><path d="M1247.05,616 L1306.55,616 A2.625,2.625 0 0 1 1308.3,617.75 L1313.2,632.5266 L1383.55,632.5266 A1.75,1.75 0 0 1 1385.3,634.2766 L1385.3,708.75 A1.75,1.75 0 0 1 1383.55,710.5 L1247.05,710.5 A1.75,1.75 0 0 1 1245.3,708.75 L1245.3,617.75 A1.75,1.75 0 0 1 1247.05,616 " fill="#DBD8AE" style="stroke:#000000;stroke-width:1.0499999999999998;"/><line style="stroke:#000000;stroke-width:1.0499999999999998;" x1="1245.3" x2="1313.2" y1="632.5266" y2="632.5266"/><text fill="#000000" font-family="sans-serif" font-size="9.8" font-weight="bold" lengthAdjust="spacing" textLength="58.8" x="1248.1" y="627.5732">persistence</text></g><!--MD5=[3ff016c1aa5003d713567a073e2181a6]
cluster application--><g id="cluster_application"><path d="M5.95,123.2 L60.55,123.2 A2.625,2.625 0 0 1 62.3,124.95 L67.2,139.7266 L694.05,139.7266 A1.75,1.75 0 0 1 695.8,141.4766 L695.8,724.85 A1.75,1.75 0 0 1 694.05,726.6 L5.95,726.6 A1.75,1.75 0 0 1 4.2,724.85 L4.2,124.95 A1.75,1.75 0 0 1 5.95,123.2 " fill="#EAF4D3" style="stroke:#000000;stroke-width:1.0499999999999998;"/><line style="stroke:#000000;stroke-width:1.0499999999999998;" x1="4.2" x2="67.2" y1="139.7266" y2="139.7266"/><text fill="#000000" font-family="sans-serif" font-size="9.8" font-weight="bold" lengthAdjust="spacing" textLength="53.9" x="7" y="134.7732">application</text></g><!--MD5=[59ece7ca57b86d1fb1e239cfe9193027]
class ActivateUserUI--><g id="elem_ActivateUserUI"><rect codeLine="4" fill="#F1F1F1" height="65.7453" id="ActivateUserUI" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="182.7" x="267.75" y="29.4"/><ellipse cx="324.275" cy="44.3461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M325.675,41.8961 Q325.8172,41.5461 325.9812,41.3711 Q326.1453,41.1961 326.3312,41.1961 Q326.6594,41.1961 326.8672,41.393 Q327.075,41.5898 327.075,42.0492 L327.075,43.143 Q327.075,43.6023 326.8781,43.7992 Q326.6812,43.9961 326.375,43.9961 Q326.1016,43.9961 325.9266,43.8758 Q325.7516,43.7555 325.675,43.4383 Q325.6422,43.2195 325.5219,43.0992 Q325.3031,42.8695 324.9094,42.7383 Q324.5156,42.5961 324.1219,42.5961 Q323.6297,42.5961 323.2141,42.793 Q322.8094,42.9898 322.4922,43.4273 Q322.175,43.8648 322.175,44.4664 L322.175,45.1117 Q322.175,45.8336 322.7656,46.3148 Q323.3562,46.7961 324.4062,46.7961 Q325.0297,46.7961 325.4672,46.6539 Q325.7187,46.5773 326.0031,46.3258 Q326.1891,46.1836 326.2875,46.1398 Q326.3859,46.0961 326.5062,46.0961 Q326.7359,46.0961 326.9,46.282 Q327.075,46.457 327.075,46.7086 Q327.075,46.9492 326.8344,47.2336 Q326.4844,47.6492 325.9266,47.8789 Q325.1937,48.1961 324.2969,48.1961 Q323.2469,48.1961 322.4047,47.7805 Q321.7266,47.4523 321.2453,46.7414 Q320.775,46.0305 320.775,45.1883 L320.775,44.4227 Q320.775,43.5477 321.1906,42.782 Q321.6172,42.0164 322.35,41.6117 Q323.0937,41.1961 323.925,41.1961 Q324.4281,41.1961 324.8656,41.3711 Q325.3031,41.5461 325.675,41.8961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="16.8" x="362.075" y="41.6199">«ui»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="63.7" x="338.625" y="53.6389">ActivateUserUI</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="268.45" x2="449.75" y1="59.2922" y2="59.2922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="273.35" y="67.2055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="164.5" x="281.75" y="72.2654">theController : ActivateUserController</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="268.45" x2="449.75" y1="77.2187" y2="77.2187"/><ellipse cx="275.45" cy="87.232" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="42" x="281.75" y="90.192">doShow()</text></g><!--MD5=[a3638c1e5b65d287ecad7f06f5c0f212]
class Role--><g id="elem_Role"><rect codeLine="15" fill="#F1F1F1" height="65.7453" id="Role" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="76.3" x="832.65" y="1241.1"/><ellipse cx="843.15" cy="1256.0461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M844.55,1253.5961 Q844.6922,1253.2461 844.8562,1253.0711 Q845.0203,1252.8961 845.2062,1252.8961 Q845.5344,1252.8961 845.7422,1253.093 Q845.95,1253.2898 845.95,1253.7492 L845.95,1254.843 Q845.95,1255.3023 845.7531,1255.4992 Q845.5562,1255.6961 845.25,1255.6961 Q844.9766,1255.6961 844.8016,1255.5758 Q844.6266,1255.4555 844.55,1255.1383 Q844.5172,1254.9195 844.3969,1254.7992 Q844.1781,1254.5695 843.7844,1254.4383 Q843.3906,1254.2961 842.9969,1254.2961 Q842.5047,1254.2961 842.0891,1254.493 Q841.6844,1254.6898 841.3672,1255.1273 Q841.05,1255.5648 841.05,1256.1664 L841.05,1256.8117 Q841.05,1257.5336 841.6406,1258.0148 Q842.2312,1258.4961 843.2812,1258.4961 Q843.9047,1258.4961 844.3422,1258.3539 Q844.5937,1258.2773 844.8781,1258.0258 Q845.0641,1257.8836 845.1625,1257.8398 Q845.2609,1257.7961 845.3812,1257.7961 Q845.6109,1257.7961 845.775,1257.982 Q845.95,1258.157 845.95,1258.4086 Q845.95,1258.6492 845.7094,1258.9336 Q845.3594,1259.3492 844.8016,1259.5789 Q844.0687,1259.8961 843.1719,1259.8961 Q842.1219,1259.8961 841.2797,1259.4805 Q840.6016,1259.1523 840.1203,1258.4414 Q839.65,1257.7305 839.65,1256.8883 L839.65,1256.1227 Q839.65,1255.2477 840.0656,1254.482 Q840.4922,1253.7164 841.225,1253.3117 Q841.9687,1252.8961 842.8,1252.8961 Q843.3031,1252.8961 843.7406,1253.0711 Q844.1781,1253.2461 844.55,1253.5961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="851.55" y="1253.3199">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="20.3" x="869.75" y="1265.3389">Role</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="833.35" x2="908.25" y1="1270.9922" y2="1270.9922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="838.25" y="1278.9055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="42" x="846.65" y="1283.9654">roleName</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="833.35" x2="908.25" y1="1288.9187" y2="1288.9187"/><ellipse cx="840.35" cy="1298.932" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="51.8" x="846.65" y="1301.892">Role(name)</text></g><!--MD5=[20c2d2fab8cbc867fc362748def8f1c0]
class RoleAssignment--><g id="elem_RoleAssignment"><rect codeLine="20" fill="#F1F1F1" height="115.0516" id="RoleAssignment" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="174.3" x="988.05" y="1216.6"/><ellipse cx="1036.525" cy="1231.5461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M1037.925,1229.0961 Q1038.0672,1228.7461 1038.2312,1228.5711 Q1038.3953,1228.3961 1038.5812,1228.3961 Q1038.9094,1228.3961 1039.1172,1228.593 Q1039.325,1228.7898 1039.325,1229.2492 L1039.325,1230.343 Q1039.325,1230.8023 1039.1281,1230.9992 Q1038.9312,1231.1961 1038.625,1231.1961 Q1038.3516,1231.1961 1038.1766,1231.0758 Q1038.0016,1230.9555 1037.925,1230.6383 Q1037.8922,1230.4195 1037.7719,1230.2992 Q1037.5531,1230.0695 1037.1594,1229.9383 Q1036.7656,1229.7961 1036.3719,1229.7961 Q1035.8797,1229.7961 1035.4641,1229.993 Q1035.0594,1230.1898 1034.7422,1230.6273 Q1034.425,1231.0648 1034.425,1231.6664 L1034.425,1232.3117 Q1034.425,1233.0336 1035.0156,1233.5148 Q1035.6062,1233.9961 1036.6562,1233.9961 Q1037.2797,1233.9961 1037.7172,1233.8539 Q1037.9687,1233.7773 1038.2531,1233.5258 Q1038.4391,1233.3836 1038.5375,1233.3398 Q1038.6359,1233.2961 1038.7562,1233.2961 Q1038.9859,1233.2961 1039.15,1233.482 Q1039.325,1233.657 1039.325,1233.9086 Q1039.325,1234.1492 1039.0844,1234.4336 Q1038.7344,1234.8492 1038.1766,1235.0789 Q1037.4437,1235.3961 1036.5469,1235.3961 Q1035.4969,1235.3961 1034.6547,1234.9805 Q1033.9766,1234.6523 1033.4953,1233.9414 Q1033.025,1233.2305 1033.025,1232.3883 L1033.025,1231.6227 Q1033.025,1230.7477 1033.4406,1229.982 Q1033.8672,1229.2164 1034.6,1228.8117 Q1035.3437,1228.3961 1036.175,1228.3961 Q1036.6781,1228.3961 1037.1156,1228.5711 Q1037.5531,1228.7461 1037.925,1229.0961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="1058.225" y="1228.8199">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="71.4" x="1050.875" y="1240.8389">RoleAssignment</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="988.75" x2="1161.65" y1="1246.4922" y2="1246.4922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="993.65" y="1254.4055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="10.5" x="1002.05" y="1259.4654">pk</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="993.65" y="1266.732"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="18.9" x="1002.05" y="1271.792">type</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="993.65" y="1279.0586"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="53.2" x="1002.05" y="1284.1186">assignedOn</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="993.65" y="1291.3852"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="64.4" x="1002.05" y="1296.4451">unassignedOn</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="993.65" y="1303.7117"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="32.2" x="1002.05" y="1308.7717">expired</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="988.75" x2="1161.65" y1="1313.725" y2="1313.725"/><ellipse cx="995.75" cy="1323.7383" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="156.1" x="1002.05" y="1326.6982">RoleAssignment(type, assignedOn)</text></g><!--MD5=[baab59eb82057fff0746fc8f0031a891]
class RoleSet--><g id="elem_RoleSet"><rect codeLine="29" fill="#F1F1F1" height="70.5797" id="RoleSet" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="109.2" x="1108.1" y="1018.5"/><ellipse cx="1142.225" cy="1029.7" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M1143.625,1027.25 Q1143.7672,1026.9 1143.9312,1026.725 Q1144.0953,1026.55 1144.2812,1026.55 Q1144.6094,1026.55 1144.8172,1026.7469 Q1145.025,1026.9437 1145.025,1027.4031 L1145.025,1028.4969 Q1145.025,1028.9562 1144.8281,1029.1531 Q1144.6312,1029.35 1144.325,1029.35 Q1144.0516,1029.35 1143.8766,1029.2297 Q1143.7016,1029.1094 1143.625,1028.7922 Q1143.5922,1028.5734 1143.4719,1028.4531 Q1143.2531,1028.2234 1142.8594,1028.0922 Q1142.4656,1027.95 1142.0719,1027.95 Q1141.5797,1027.95 1141.1641,1028.1469 Q1140.7594,1028.3437 1140.4422,1028.7812 Q1140.125,1029.2187 1140.125,1029.8203 L1140.125,1030.4656 Q1140.125,1031.1875 1140.7156,1031.6687 Q1141.3062,1032.15 1142.3562,1032.15 Q1142.9797,1032.15 1143.4172,1032.0078 Q1143.6687,1031.9312 1143.9531,1031.6797 Q1144.1391,1031.5375 1144.2375,1031.4937 Q1144.3359,1031.45 1144.4562,1031.45 Q1144.6859,1031.45 1144.85,1031.6359 Q1145.025,1031.8109 1145.025,1032.0625 Q1145.025,1032.3031 1144.7844,1032.5875 Q1144.4344,1033.0031 1143.8766,1033.2328 Q1143.1437,1033.55 1142.2469,1033.55 Q1141.1969,1033.55 1140.3547,1033.1344 Q1139.6766,1032.8062 1139.1953,1032.0953 Q1138.725,1031.3844 1138.725,1030.5422 L1138.725,1029.7766 Q1138.725,1028.9016 1139.1406,1028.1359 Q1139.5672,1027.3703 1140.3,1026.9656 Q1141.0437,1026.55 1141.875,1026.55 Q1142.3781,1026.55 1142.8156,1026.725 Q1143.2531,1026.9 1143.625,1027.25 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="35" x="1156.575" y="1033.71">RoleSet</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="1108.8" x2="1216.6" y1="1040.9" y2="1040.9"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="1113.7" y="1048.8133"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="55.3" x="1122.1" y="1053.8732">assignments</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="1108.8" x2="1216.6" y1="1058.8266" y2="1058.8266"/><ellipse cx="1115.8" cy="1068.8398" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="40.6" x="1122.1" y="1071.7998">add(role)</text><ellipse cx="1115.8" cy="1081.1664" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="91" x="1122.1" y="1084.1264">hasAssignment(role)</text></g><!--MD5=[73145e46247802284b2f7aaef1fa1797]
class Set--><g id="elem_Set"><rect codeLine="151" fill="#F1F1F1" height="33.6" id="Set" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="37.1" x="1149.05" y="942.9"/><ellipse cx="1159.55" cy="954.1" fill="#B4A7E5" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M1160.25,952 L1160.25,956.2 L1161.65,956.2 L1161.9891,956.2 L1162.35,956.6375 L1162.35,956.9 L1162.35,957.1625 L1161.9891,957.6 L1161.65,957.6 L1157.45,957.6 L1157.1109,957.6 L1156.75,957.1625 L1156.75,956.9 L1156.75,956.6375 L1157.1109,956.2 L1157.45,956.2 L1158.85,956.2 L1158.85,952 L1157.45,952 L1157.1109,952 L1156.75,951.5625 L1156.75,951.3 L1156.75,951.0375 L1157.1109,950.6 L1157.45,950.6 L1161.65,950.6 L1161.9891,950.6 L1162.35,951.0375 L1162.35,951.3 L1162.35,951.5625 L1161.9891,952 L1161.65,952 L1160.25,952 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="9.8" font-style="italic" lengthAdjust="spacing" textLength="14.7" x="1169.35" y="958.11">Set</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="1149.75" x2="1185.45" y1="965.3" y2="965.3"/><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="1149.75" x2="1185.45" y1="970.9" y2="970.9"/></g><!--MD5=[bc064d979c32666ae52f3d7624591b7b]
class SystemUser--><g id="elem_SystemUser"><rect codeLine="36" fill="#F1F1F1" height="199.5766" id="SystemUser" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="327.6" x="889.7" y="570.5"/><ellipse cx="1019.025" cy="590.7289" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M1020.425,588.2789 Q1020.5672,587.9289 1020.7312,587.7539 Q1020.8953,587.5789 1021.0812,587.5789 Q1021.4094,587.5789 1021.6172,587.7758 Q1021.825,587.9727 1021.825,588.432 L1021.825,589.5258 Q1021.825,589.9852 1021.6281,590.182 Q1021.4312,590.3789 1021.125,590.3789 Q1020.8516,590.3789 1020.6766,590.2586 Q1020.5016,590.1383 1020.425,589.8211 Q1020.3922,589.6023 1020.2719,589.482 Q1020.0531,589.2523 1019.6594,589.1211 Q1019.2656,588.9789 1018.8719,588.9789 Q1018.3797,588.9789 1017.9641,589.1758 Q1017.5594,589.3727 1017.2422,589.8102 Q1016.925,590.2477 1016.925,590.8492 L1016.925,591.4945 Q1016.925,592.2164 1017.5156,592.6977 Q1018.1062,593.1789 1019.1562,593.1789 Q1019.7797,593.1789 1020.2172,593.0367 Q1020.4687,592.9602 1020.7531,592.7086 Q1020.9391,592.5664 1021.0375,592.5227 Q1021.1359,592.4789 1021.2562,592.4789 Q1021.4859,592.4789 1021.65,592.6648 Q1021.825,592.8398 1021.825,593.0914 Q1021.825,593.332 1021.5844,593.6164 Q1021.2344,594.032 1020.6766,594.2617 Q1019.9437,594.5789 1019.0469,594.5789 Q1017.9969,594.5789 1017.1547,594.1633 Q1016.4766,593.8352 1015.9953,593.1242 Q1015.525,592.4133 1015.525,591.5711 L1015.525,590.8055 Q1015.525,589.9305 1015.9406,589.1648 Q1016.3672,588.3992 1017.1,587.9945 Q1017.8437,587.5789 1018.675,587.5789 Q1019.1781,587.5789 1019.6156,587.7539 Q1020.0531,587.9289 1020.425,588.2789 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="65.8" x="1031.975" y="582.7199">«aggregate root»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="30.1" x="1049.825" y="593.2855">«entity»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="52.5" x="1038.625" y="605.3045">SystemUser</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="890.4" x2="1216.6" y1="610.9578" y2="610.9578"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="618.8711"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="91.7" x="903.7" y="623.9311">email : EmailAddress</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="631.1977"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="93.1" x="903.7" y="636.2576">password : Password</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="643.5242"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="87.5" x="903.7" y="648.5842">fullName : FullName</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="655.8508"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="105" x="903.7" y="660.9107">shortName : ShortName</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="668.1773"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="65.1" x="903.7" y="673.2373">roles : RoleSet</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="680.5039"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="95.9" x="903.7" y="685.5639">createdOn : Calendar</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="692.8305"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="70" x="903.7" y="697.8904">active : boolean</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="705.157"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="102.2" x="903.7" y="710.217">activatedOn : Calendar</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="895.3" y="717.4836"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="102.2" x="903.7" y="722.5436">activatedOn : Calendar</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="890.4" x2="1216.6" y1="727.4969" y2="727.4969"/><ellipse cx="897.4" cy="737.5102" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="309.4" x="903.7" y="740.4701">SystemUser (email, password, fullName, shortName, roles, createdOn)</text><ellipse cx="897.4" cy="749.8367" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="266.7" x="903.7" y="752.7967">init(email, password, fullName, shortName, roles, createdOn)</text><ellipse cx="897.4" cy="762.1633" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="94.5" x="903.7" y="765.1232">activate(activatedOn)</text></g><!--MD5=[6a10e9b103e375a5f698786d329ce000]
class EmailAddress--><g id="elem_EmailAddress"><rect codeLine="51" fill="#F1F1F1" height="88.6375" id="EmailAddress" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="108.5" x="724.15" y="812"/><ellipse cx="746.305" cy="832.2289" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M747.705,829.7789 Q747.8472,829.4289 748.0112,829.2539 Q748.1753,829.0789 748.3612,829.0789 Q748.6894,829.0789 748.8972,829.2758 Q749.105,829.4727 749.105,829.932 L749.105,831.0258 Q749.105,831.4852 748.9081,831.682 Q748.7113,831.8789 748.405,831.8789 Q748.1316,831.8789 747.9566,831.7586 Q747.7816,831.6383 747.705,831.3211 Q747.6722,831.1023 747.5519,830.982 Q747.3331,830.7523 746.9394,830.6211 Q746.5456,830.4789 746.1519,830.4789 Q745.6597,830.4789 745.2441,830.6758 Q744.8394,830.8727 744.5222,831.3102 Q744.205,831.7477 744.205,832.3492 L744.205,832.9945 Q744.205,833.7164 744.7956,834.1977 Q745.3862,834.6789 746.4362,834.6789 Q747.0597,834.6789 747.4972,834.5367 Q747.7487,834.4602 748.0331,834.2086 Q748.2191,834.0664 748.3175,834.0227 Q748.4159,833.9789 748.5362,833.9789 Q748.7659,833.9789 748.93,834.1648 Q749.105,834.3398 749.105,834.5914 Q749.105,834.832 748.8644,835.1164 Q748.5144,835.532 747.9566,835.7617 Q747.2237,836.0789 746.3269,836.0789 Q745.2769,836.0789 744.4347,835.6633 Q743.7566,835.3352 743.2753,834.6242 Q742.805,833.9133 742.805,833.0711 L742.805,832.3055 Q742.805,831.4305 743.2206,830.6648 Q743.6472,829.8992 744.38,829.4945 Q745.1237,829.0789 745.955,829.0789 Q746.4581,829.0789 746.8956,829.2539 Q747.3331,829.4289 747.705,829.7789 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="760.445" y="824.2199">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="16.8" x="780.395" y="834.7855">«id»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="60.2" x="758.695" y="846.8045">EmailAddress</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="724.85" x2="831.95" y1="852.4578" y2="852.4578"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.75" y="860.3711"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="57.4" x="738.15" y="865.4311">email : String</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="724.85" x2="831.95" y1="870.3844" y2="870.3844"/><ellipse cx="731.85" cy="880.3977" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="64.4" x="738.15" y="883.3576">valueOf(email)</text><ellipse cx="731.85" cy="892.7242" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="90.3" x="738.15" y="895.6842">EmailAddress(email)</text></g><!--MD5=[2f01b1126ff33a0669651ec2488a5ef9]
class Password--><g id="elem_Password"><rect codeLine="57" fill="#F1F1F1" height="65.7453" id="Password" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="217.7" x="794.85" y="1020.95"/><ellipse cx="873.775" cy="1035.8961" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M875.175,1033.4461 Q875.3172,1033.0961 875.4812,1032.9211 Q875.6453,1032.7461 875.8312,1032.7461 Q876.1594,1032.7461 876.3672,1032.943 Q876.575,1033.1398 876.575,1033.5992 L876.575,1034.693 Q876.575,1035.1523 876.3781,1035.3492 Q876.1812,1035.5461 875.875,1035.5461 Q875.6016,1035.5461 875.4266,1035.4258 Q875.2516,1035.3055 875.175,1034.9883 Q875.1422,1034.7695 875.0219,1034.6492 Q874.8031,1034.4195 874.4094,1034.2883 Q874.0156,1034.1461 873.6219,1034.1461 Q873.1297,1034.1461 872.7141,1034.343 Q872.3094,1034.5398 871.9922,1034.9773 Q871.675,1035.4148 871.675,1036.0164 L871.675,1036.6617 Q871.675,1037.3836 872.2656,1037.8648 Q872.8562,1038.3461 873.9062,1038.3461 Q874.5297,1038.3461 874.9672,1038.2039 Q875.2187,1038.1273 875.5031,1037.8758 Q875.6891,1037.7336 875.7875,1037.6898 Q875.8859,1037.6461 876.0062,1037.6461 Q876.2359,1037.6461 876.4,1037.832 Q876.575,1038.007 876.575,1038.2586 Q876.575,1038.4992 876.3344,1038.7836 Q875.9844,1039.1992 875.4266,1039.4289 Q874.6937,1039.7461 873.7969,1039.7461 Q872.7469,1039.7461 871.9047,1039.3305 Q871.2266,1039.0023 870.7453,1038.2914 Q870.275,1037.5805 870.275,1036.7383 L870.275,1035.9727 Q870.275,1035.0977 870.6906,1034.332 Q871.1172,1033.5664 871.85,1033.1617 Q872.5937,1032.7461 873.425,1032.7461 Q873.9281,1032.7461 874.3656,1032.9211 Q874.8031,1033.0961 875.175,1033.4461 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="886.725" y="1033.1699">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="42.7" x="893.725" y="1045.1889">Password</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="795.55" x2="1011.85" y1="1050.8422" y2="1050.8422"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="800.45" y="1058.7555"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="77" x="808.85" y="1063.8154">Password : String</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="795.55" x2="1011.85" y1="1068.7687" y2="1068.7687"/><ellipse cx="802.55" cy="1078.782" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="199.5" x="808.85" y="1081.742">encodedAndValid(password, policy, encoder)</text></g><!--MD5=[ba7731d2bbdb81fc0704c700614d70af]
class FullName--><g id="elem_FullName"><rect codeLine="62" fill="#F1F1F1" height="78.0719" id="FullName" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="107.1" x="857.15" y="817.25"/><ellipse cx="881.51" cy="832.1961" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M882.91,829.7461 Q883.0522,829.3961 883.2162,829.2211 Q883.3803,829.0461 883.5662,829.0461 Q883.8944,829.0461 884.1022,829.243 Q884.31,829.4398 884.31,829.8992 L884.31,830.993 Q884.31,831.4523 884.1131,831.6492 Q883.9162,831.8461 883.61,831.8461 Q883.3366,831.8461 883.1616,831.7258 Q882.9866,831.6055 882.91,831.2883 Q882.8772,831.0695 882.7569,830.9492 Q882.5381,830.7195 882.1444,830.5883 Q881.7506,830.4461 881.3569,830.4461 Q880.8647,830.4461 880.4491,830.643 Q880.0444,830.8398 879.7272,831.2773 Q879.41,831.7148 879.41,832.3164 L879.41,832.9617 Q879.41,833.6836 880.0006,834.1648 Q880.5912,834.6461 881.6412,834.6461 Q882.2647,834.6461 882.7022,834.5039 Q882.9537,834.4273 883.2381,834.1758 Q883.4241,834.0336 883.5225,833.9898 Q883.6209,833.9461 883.7412,833.9461 Q883.9709,833.9461 884.135,834.132 Q884.31,834.307 884.31,834.5586 Q884.31,834.7992 884.0694,835.0836 Q883.7194,835.4992 883.1616,835.7289 Q882.4287,836.0461 881.5319,836.0461 Q880.4819,836.0461 879.6397,835.6305 Q878.9616,835.3023 878.4803,834.5914 Q878.01,833.8805 878.01,833.0383 L878.01,832.2727 Q878.01,831.3977 878.4256,830.632 Q878.8522,829.8664 879.585,829.4617 Q880.3287,829.0461 881.16,829.0461 Q881.6631,829.0461 882.1006,829.2211 Q882.5381,829.3961 882.91,829.7461 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="892.99" y="829.4699">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="41.3" x="900.69" y="841.4889">FullName</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="857.85" x2="963.55" y1="847.1422" y2="847.1422"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="862.75" y="855.0555"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="72.1" x="871.15" y="860.1154">fullName : String</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="857.85" x2="963.55" y1="865.0687" y2="865.0687"/><ellipse cx="864.85" cy="875.082" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="79.1" x="871.15" y="878.042">valueOf(fullName)</text><ellipse cx="864.85" cy="887.4086" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="88.9" x="871.15" y="890.3686">FullName (fullName)</text></g><!--MD5=[f338b7fac0450cb697edae5d9e4bb9ca]
class ShortName--><g id="elem_ShortName"><rect codeLine="68" fill="#F1F1F1" height="78.0719" id="ShortName" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="116.9" x="988.75" y="817.25"/><ellipse cx="1017.52" cy="832.1961" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M1018.92,829.7461 Q1019.0622,829.3961 1019.2262,829.2211 Q1019.3903,829.0461 1019.5762,829.0461 Q1019.9044,829.0461 1020.1122,829.243 Q1020.32,829.4398 1020.32,829.8992 L1020.32,830.993 Q1020.32,831.4523 1020.1231,831.6492 Q1019.9262,831.8461 1019.62,831.8461 Q1019.3466,831.8461 1019.1716,831.7258 Q1018.9966,831.6055 1018.92,831.2883 Q1018.8872,831.0695 1018.7669,830.9492 Q1018.5481,830.7195 1018.1544,830.5883 Q1017.7606,830.4461 1017.3669,830.4461 Q1016.8747,830.4461 1016.4591,830.643 Q1016.0544,830.8398 1015.7372,831.2773 Q1015.42,831.7148 1015.42,832.3164 L1015.42,832.9617 Q1015.42,833.6836 1016.0106,834.1648 Q1016.6012,834.6461 1017.6512,834.6461 Q1018.2747,834.6461 1018.7122,834.5039 Q1018.9637,834.4273 1019.2481,834.1758 Q1019.4341,834.0336 1019.5325,833.9898 Q1019.6309,833.9461 1019.7512,833.9461 Q1019.9809,833.9461 1020.145,834.132 Q1020.32,834.307 1020.32,834.5586 Q1020.32,834.7992 1020.0794,835.0836 Q1019.7294,835.4992 1019.1716,835.7289 Q1018.4387,836.0461 1017.5419,836.0461 Q1016.4919,836.0461 1015.6497,835.6305 Q1014.9716,835.3023 1014.4903,834.5914 Q1014.02,833.8805 1014.02,833.0383 L1014.02,832.2727 Q1014.02,831.3977 1014.4356,830.632 Q1014.8622,829.8664 1015.595,829.4617 Q1016.3387,829.0461 1017.17,829.0461 Q1017.6731,829.0461 1018.1106,829.2211 Q1018.5481,829.3961 1018.92,829.7461 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="1029.98" y="829.4699">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="49" x="1033.83" y="841.4889">ShortName</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="989.45" x2="1104.95" y1="847.1422" y2="847.1422"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="994.35" y="855.0555"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="81.9" x="1002.75" y="860.1154">shortName : String</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="989.45" x2="1104.95" y1="865.0687" y2="865.0687"/><ellipse cx="996.45" cy="875.082" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="88.9" x="1002.75" y="878.042">valueOf(shortName)</text><ellipse cx="996.45" cy="887.4086" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="98.7" x="1002.75" y="890.3686">FullName (shortName)</text></g><!--MD5=[e6c63db5240f7c9aea50f4d0a5b19113]
class SystemUserBuilder--><g id="elem_SystemUserBuilder"><rect codeLine="74" fill="#F1F1F1" height="189.0109" id="SystemUserBuilder" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="141.4" x="723.8" y="575.75"/><ellipse cx="750.365" cy="590.6961" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M751.765,588.2461 Q751.9072,587.8961 752.0712,587.7211 Q752.2353,587.5461 752.4212,587.5461 Q752.7494,587.5461 752.9572,587.743 Q753.165,587.9398 753.165,588.3992 L753.165,589.493 Q753.165,589.9523 752.9681,590.1492 Q752.7712,590.3461 752.465,590.3461 Q752.1916,590.3461 752.0166,590.2258 Q751.8416,590.1055 751.765,589.7883 Q751.7322,589.5695 751.6119,589.4492 Q751.3931,589.2195 750.9994,589.0883 Q750.6056,588.9461 750.2119,588.9461 Q749.7197,588.9461 749.3041,589.143 Q748.8994,589.3398 748.5822,589.7773 Q748.265,590.2148 748.265,590.8164 L748.265,591.4617 Q748.265,592.1836 748.8556,592.6648 Q749.4462,593.1461 750.4962,593.1461 Q751.1197,593.1461 751.5572,593.0039 Q751.8087,592.9273 752.0931,592.6758 Q752.2791,592.5336 752.3775,592.4898 Q752.4759,592.4461 752.5962,592.4461 Q752.8259,592.4461 752.99,592.632 Q753.165,592.807 753.165,593.0586 Q753.165,593.2992 752.9244,593.5836 Q752.5744,593.9992 752.0166,594.2289 Q751.2837,594.5461 750.3869,594.5461 Q749.3369,594.5461 748.4947,594.1305 Q747.8166,593.8023 747.3353,593.0914 Q746.865,592.3805 746.865,591.5383 L746.865,590.7727 Q746.865,589.8977 747.2806,589.132 Q747.7072,588.3664 748.44,587.9617 Q749.1837,587.5461 750.015,587.5461 Q750.5181,587.5461 750.9556,587.7211 Q751.3931,587.8961 751.765,588.2461 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="35" x="787.885" y="587.9699">«factory»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="83.3" x="763.735" y="599.9889">SystemUserBuilder</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="724.5" x2="864.5" y1="605.6422" y2="605.6422"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.4" y="613.5555"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="91.7" x="737.8" y="618.6154">email : EmailAddress</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.4" y="625.882"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="93.1" x="737.8" y="630.942">password : Password</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.4" y="638.2086"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="87.5" x="737.8" y="643.2686">fullName : FullName</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.4" y="650.5352"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="105" x="737.8" y="655.5951">shortName : ShortName</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.4" y="662.8617"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="65.1" x="737.8" y="667.9217">roles : RoleSet</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="729.4" y="675.1883"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="95.9" x="737.8" y="680.2482">createdOn : Calendar</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="724.5" x2="864.5" y1="685.2016" y2="685.2016"/><ellipse cx="731.5" cy="695.2148" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="73.5" x="737.8" y="698.1748">withEmail (email)</text><ellipse cx="731.5" cy="707.5414" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="111.3" x="737.8" y="710.5014">withPassword (password)</text><ellipse cx="731.5" cy="719.868" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="111.3" x="737.8" y="722.8279">withFullName (pfullName)</text><ellipse cx="731.5" cy="732.1945" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="123.2" x="737.8" y="735.1545">withShortName (shortName)</text><ellipse cx="731.5" cy="744.5211" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="73.5" x="737.8" y="747.4811">withRoles (roles)</text><ellipse cx="731.5" cy="756.8477" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="33.6" x="737.8" y="759.8076">build ();</text></g><!--MD5=[093c210125347143eef5bb9199eae634]
class UserRepository--><g id="elem_UserRepository"><rect codeLine="91" fill="#F1F1F1" height="58.2531" id="UserRepository" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="116.9" x="1256.85" y="641.2"/><ellipse cx="1279.005" cy="652.4" fill="#B4A7E5" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M1279.705,650.3 L1279.705,654.5 L1281.105,654.5 L1281.4441,654.5 L1281.805,654.9375 L1281.805,655.2 L1281.805,655.4625 L1281.4441,655.9 L1281.105,655.9 L1276.905,655.9 L1276.5659,655.9 L1276.205,655.4625 L1276.205,655.2 L1276.205,654.9375 L1276.5659,654.5 L1276.905,654.5 L1278.305,654.5 L1278.305,650.3 L1276.905,650.3 L1276.5659,650.3 L1276.205,649.8625 L1276.205,649.6 L1276.205,649.3375 L1276.5659,648.9 L1276.905,648.9 L1281.105,648.9 L1281.4441,648.9 L1281.805,649.3375 L1281.805,649.6 L1281.805,649.8625 L1281.4441,650.3 L1281.105,650.3 L1279.705,650.3 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="9.8" font-style="italic" lengthAdjust="spacing" textLength="68.6" x="1291.395" y="656.41">UserRepository</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="1257.55" x2="1373.05" y1="663.6" y2="663.6"/><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="1257.55" x2="1373.05" y1="669.2" y2="669.2"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="81.9" x="1261.05" y="682.1732">findByActive(false)</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="108.5" x="1261.05" y="694.4998">save(user : SystemUser)</text></g><!--MD5=[c3f5c9c56aa3a62f6697887fce002698]
class ActivateUserController--><g id="elem_ActivateUserController"><rect codeLine="97" fill="#F1F1F1" height="90.3984" id="ActivateUserController" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="172.9" x="272.65" y="148.4"/><ellipse cx="306.775" cy="163.3461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M308.175,160.8961 Q308.3172,160.5461 308.4812,160.3711 Q308.6453,160.1961 308.8312,160.1961 Q309.1594,160.1961 309.3672,160.393 Q309.575,160.5898 309.575,161.0492 L309.575,162.143 Q309.575,162.6023 309.3781,162.7992 Q309.1812,162.9961 308.875,162.9961 Q308.6016,162.9961 308.4266,162.8758 Q308.2516,162.7555 308.175,162.4383 Q308.1422,162.2195 308.0219,162.0992 Q307.8031,161.8695 307.4094,161.7383 Q307.0156,161.5961 306.6219,161.5961 Q306.1297,161.5961 305.7141,161.793 Q305.3094,161.9898 304.9922,162.4273 Q304.675,162.8648 304.675,163.4664 L304.675,164.1117 Q304.675,164.8336 305.2656,165.3148 Q305.8562,165.7961 306.9062,165.7961 Q307.5297,165.7961 307.9672,165.6539 Q308.2187,165.5773 308.5031,165.3258 Q308.6891,165.1836 308.7875,165.1398 Q308.8859,165.0961 309.0062,165.0961 Q309.2359,165.0961 309.4,165.282 Q309.575,165.457 309.575,165.7086 Q309.575,165.9492 309.3344,166.2336 Q308.9844,166.6492 308.4266,166.8789 Q307.6937,167.1961 306.7969,167.1961 Q305.7469,167.1961 304.9047,166.7805 Q304.2266,166.4523 303.7453,165.7414 Q303.275,165.0305 303.275,164.1883 L303.275,163.4227 Q303.275,162.5477 303.6906,161.782 Q304.1172,161.0164 304.85,160.6117 Q305.5937,160.1961 306.425,160.1961 Q306.9281,160.1961 307.3656,160.3711 Q307.8031,160.5461 308.175,160.8961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="45.5" x="347.725" y="160.6199">«controller»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="98.7" x="321.125" y="172.6389">ActivateUserController</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="273.35" x2="444.85" y1="178.2922" y2="178.2922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="278.25" y="186.2055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="122.5" x="286.65" y="191.2654">authz : AuthorizationService</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="278.25" y="198.532"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="154.7" x="286.65" y="203.592">userSvc : UserManagementService</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="273.35" x2="444.85" y1="208.5453" y2="208.5453"/><ellipse cx="280.35" cy="218.5586" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="60.9" x="286.65" y="221.5186">activeUsers ()</text><ellipse cx="280.35" cy="230.8852" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="81.2" x="286.65" y="233.8451">activateUser(user)</text></g><!--MD5=[54a33dd013dd881697601ca49de6dfbc]
class AuthorizationService--><g id="elem_AuthorizationService"><rect codeLine="105" fill="#F1F1F1" height="127.3781" id="AuthorizationService" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="210.7" x="15.75" y="280.7"/><ellipse cx="72.975" cy="295.6461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M74.375,293.1961 Q74.5172,292.8461 74.6812,292.6711 Q74.8453,292.4961 75.0312,292.4961 Q75.3594,292.4961 75.5672,292.693 Q75.775,292.8898 75.775,293.3492 L75.775,294.443 Q75.775,294.9023 75.5781,295.0992 Q75.3812,295.2961 75.075,295.2961 Q74.8016,295.2961 74.6266,295.1758 Q74.4516,295.0555 74.375,294.7383 Q74.3422,294.5195 74.2219,294.3992 Q74.0031,294.1695 73.6094,294.0383 Q73.2156,293.8961 72.8219,293.8961 Q72.3297,293.8961 71.9141,294.093 Q71.5094,294.2898 71.1922,294.7273 Q70.875,295.1648 70.875,295.7664 L70.875,296.4117 Q70.875,297.1336 71.4656,297.6148 Q72.0562,298.0961 73.1062,298.0961 Q73.7297,298.0961 74.1672,297.9539 Q74.4187,297.8773 74.7031,297.6258 Q74.8891,297.4836 74.9875,297.4398 Q75.0859,297.3961 75.2062,297.3961 Q75.4359,297.3961 75.6,297.582 Q75.775,297.757 75.775,298.0086 Q75.775,298.2492 75.5344,298.5336 Q75.1844,298.9492 74.6266,299.1789 Q73.8937,299.4961 72.9969,299.4961 Q71.9469,299.4961 71.1047,299.0805 Q70.4266,298.7523 69.9453,298.0414 Q69.475,297.3305 69.475,296.4883 L69.475,295.7227 Q69.475,294.8477 69.8906,294.082 Q70.3172,293.3164 71.05,292.9117 Q71.7937,292.4961 72.625,292.4961 Q73.1281,292.4961 73.5656,292.6711 Q74.0031,292.8461 74.375,293.1961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.1" x="113.925" y="292.9199">«service»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="90.3" x="87.325" y="304.9389">AuthorizationService</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="16.45" x2="225.75" y1="310.5922" y2="310.5922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="21.35" y="318.5055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="118.3" x="29.75" y="323.5654">userSession : UserSession</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="16.45" x2="225.75" y1="328.5187" y2="328.5187"/><ellipse cx="23.45" cy="338.532" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="125.3" x="29.75" y="341.492">createSessionForUser(user)</text><ellipse cx="23.45" cy="350.8586" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="63.7" x="29.75" y="353.8186">clearSession()</text><ellipse cx="23.45" cy="363.1852" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="58.1" x="29.75" y="366.1451">hasSession()</text><ellipse cx="23.45" cy="375.5117" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="40.6" x="29.75" y="378.4717">session()</text><ellipse cx="23.45" cy="387.8383" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="183.4" x="29.75" y="390.7982">isAuthenticatedUserAuthorizedTo (action)</text><ellipse cx="23.45" cy="400.1648" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="192.5" x="29.75" y="403.1248">ensureAuthenticatedUserHasAnyOf (action)</text></g><!--MD5=[b07be2b600772d055921457a51a4b081]
class AuthenticationService--><g id="elem_AuthenticationService"><rect codeLine="115" fill="#F1F1F1" height="127.3781" id="AuthenticationService" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="246.4" x="251.3" y="280.7"/><ellipse cx="323.575" cy="295.6461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M324.975,293.1961 Q325.1172,292.8461 325.2812,292.6711 Q325.4453,292.4961 325.6312,292.4961 Q325.9594,292.4961 326.1672,292.693 Q326.375,292.8898 326.375,293.3492 L326.375,294.443 Q326.375,294.9023 326.1781,295.0992 Q325.9812,295.2961 325.675,295.2961 Q325.4016,295.2961 325.2266,295.1758 Q325.0516,295.0555 324.975,294.7383 Q324.9422,294.5195 324.8219,294.3992 Q324.6031,294.1695 324.2094,294.0383 Q323.8156,293.8961 323.4219,293.8961 Q322.9297,293.8961 322.5141,294.093 Q322.1094,294.2898 321.7922,294.7273 Q321.475,295.1648 321.475,295.7664 L321.475,296.4117 Q321.475,297.1336 322.0656,297.6148 Q322.6562,298.0961 323.7062,298.0961 Q324.3297,298.0961 324.7672,297.9539 Q325.0187,297.8773 325.3031,297.6258 Q325.4891,297.4836 325.5875,297.4398 Q325.6859,297.3961 325.8062,297.3961 Q326.0359,297.3961 326.2,297.582 Q326.375,297.757 326.375,298.0086 Q326.375,298.2492 326.1344,298.5336 Q325.7844,298.9492 325.2266,299.1789 Q324.4937,299.4961 323.5969,299.4961 Q322.5469,299.4961 321.7047,299.0805 Q321.0266,298.7523 320.5453,298.0414 Q320.075,297.3305 320.075,296.4883 L320.075,295.7227 Q320.075,294.8477 320.4906,294.082 Q320.9172,293.3164 321.65,292.9117 Q322.3937,292.4961 323.225,292.4961 Q323.7281,292.4961 324.1656,292.6711 Q324.6031,292.8461 324.975,293.1961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.1" x="367.325" y="292.9199">«service»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="95.9" x="337.925" y="304.9389">AuthenticationService</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="252" x2="497" y1="310.5922" y2="310.5922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="256.9" y="318.5055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="96.6" x="265.3" y="323.5654">repo : UserRepository</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="256.9" y="330.832"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="122.5" x="265.3" y="335.892">authz : AuthorizationService</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="256.9" y="343.1586"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="102.2" x="265.3" y="348.2186">policy : PasswordPolicy</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="256.9" y="355.4852"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="124.6" x="265.3" y="360.5451">encoder : PasswordEncoder</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="252" x2="497" y1="365.4984" y2="365.4984"/><ellipse cx="259" cy="375.5117" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="228.2" x="265.3" y="378.4717">AuthenticationService (repo, authz, policy, encoder)</text><ellipse cx="259" cy="387.8383" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="216.3" x="265.3" y="390.7982">authenticate(email, rawPassword, requiredRoles)</text><ellipse cx="259" cy="400.1648" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="84" x="265.3" y="403.1248">retrieveUser(email)</text></g><!--MD5=[dee3711f8c64a3e2b37828f172d71c22]
class UserManagementService--><g id="elem_UserManagementService"><rect codeLine="125" fill="#F1F1F1" height="90.3984" id="UserManagementService" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="161.7" x="522.55" y="299.25"/><ellipse cx="545.965" cy="314.1961" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M547.365,311.7461 Q547.5072,311.3961 547.6712,311.2211 Q547.8353,311.0461 548.0212,311.0461 Q548.3494,311.0461 548.5572,311.243 Q548.765,311.4398 548.765,311.8992 L548.765,312.993 Q548.765,313.4523 548.5681,313.6492 Q548.3712,313.8461 548.065,313.8461 Q547.7916,313.8461 547.6166,313.7258 Q547.4416,313.6055 547.365,313.2883 Q547.3322,313.0695 547.2119,312.9492 Q546.9931,312.7195 546.5994,312.5883 Q546.2056,312.4461 545.8119,312.4461 Q545.3197,312.4461 544.9041,312.643 Q544.4994,312.8398 544.1822,313.2773 Q543.865,313.7148 543.865,314.3164 L543.865,314.9617 Q543.865,315.6836 544.4556,316.1648 Q545.0462,316.6461 546.0962,316.6461 Q546.7197,316.6461 547.1572,316.5039 Q547.4087,316.4273 547.6931,316.1758 Q547.8791,316.0336 547.9775,315.9898 Q548.0759,315.9461 548.1963,315.9461 Q548.4259,315.9461 548.59,316.132 Q548.765,316.307 548.765,316.5586 Q548.765,316.7992 548.5244,317.0836 Q548.1744,317.4992 547.6166,317.7289 Q546.8838,318.0461 545.9869,318.0461 Q544.9369,318.0461 544.0947,317.6305 Q543.4166,317.3023 542.9353,316.5914 Q542.465,315.8805 542.465,315.0383 L542.465,314.2727 Q542.465,313.3977 542.8806,312.632 Q543.3072,311.8664 544.04,311.4617 Q544.7837,311.0461 545.615,311.0461 Q546.1181,311.0461 546.5556,311.2211 Q546.9931,311.3961 547.365,311.7461 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.1" x="595.385" y="311.4699">«service»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="110.6" x="558.635" y="323.4889">UserManagementService</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="523.25" x2="683.55" y1="329.1422" y2="329.1422"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="528.15" y="337.0555"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="143.5" x="536.55" y="342.1154">userRepository : UserRepository</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="528.15" y="349.382"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="124.6" x="536.55" y="354.442">encoder : PasswordEncoder</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="528.15" y="361.7086"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="102.2" x="536.55" y="366.7686">policy : PasswordPolicy</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="523.25" x2="683.55" y1="371.7219" y2="371.7219"/><ellipse cx="530.25" cy="381.7352" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="81.2" x="536.55" y="384.6951">activateUser(user)</text></g><!--MD5=[f2f4f081f533f1801637718551dd4ff8]
class PasswordEncoder--><g id="elem_PasswordEncoder"><rect codeLine="132" fill="#F1F1F1" height="78.0719" id="PasswordEncoder" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="204.4" x="321.3" y="450.1"/><ellipse cx="380.625" cy="465.0461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M382.025,462.5961 Q382.1672,462.2461 382.3312,462.0711 Q382.4953,461.8961 382.6812,461.8961 Q383.0094,461.8961 383.2172,462.093 Q383.425,462.2898 383.425,462.7492 L383.425,463.843 Q383.425,464.3023 383.2281,464.4992 Q383.0312,464.6961 382.725,464.6961 Q382.4516,464.6961 382.2766,464.5758 Q382.1016,464.4555 382.025,464.1383 Q381.9922,463.9195 381.8719,463.7992 Q381.6531,463.5695 381.2594,463.4383 Q380.8656,463.2961 380.4719,463.2961 Q379.9797,463.2961 379.5641,463.493 Q379.1594,463.6898 378.8422,464.1273 Q378.525,464.5648 378.525,465.1664 L378.525,465.8117 Q378.525,466.5336 379.1156,467.0148 Q379.7062,467.4961 380.7562,467.4961 Q381.3797,467.4961 381.8172,467.3539 Q382.0687,467.2773 382.3531,467.0258 Q382.5391,466.8836 382.6375,466.8398 Q382.7359,466.7961 382.8562,466.7961 Q383.0859,466.7961 383.25,466.982 Q383.425,467.157 383.425,467.4086 Q383.425,467.6492 383.1844,467.9336 Q382.8344,468.3492 382.2766,468.5789 Q381.5437,468.8961 380.6469,468.8961 Q379.5969,468.8961 378.7547,468.4805 Q378.0766,468.1523 377.5953,467.4414 Q377.125,466.7305 377.125,465.8883 L377.125,465.1227 Q377.125,464.2477 377.5406,463.482 Q377.9672,462.7164 378.7,462.3117 Q379.4437,461.8961 380.275,461.8961 Q380.7781,461.8961 381.2156,462.0711 Q381.6531,462.2461 382.025,462.5961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.1" x="416.325" y="462.3199">«service»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="79.8" x="394.975" y="474.3389">PasswordEncoder</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="322" x2="525" y1="479.9922" y2="479.9922"/><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="322" x2="525" y1="485.5922" y2="485.5922"/><ellipse cx="329" cy="495.6055" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="98" x="335.3" y="498.5654">encode(rawPassword)</text><ellipse cx="329" cy="507.932" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="186.2" x="335.3" y="510.892">matches(rawPassword,encodedPassword)</text><ellipse cx="329" cy="520.2586" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="166.6" x="335.3" y="523.2186">upgradeEncoding(encodedPassword)</text></g><!--MD5=[0681c2e94bdf5871eea92a1a4901fc0d]
class PasswordPolicy--><g id="elem_PasswordPolicy"><rect codeLine="138" fill="#F1F1F1" height="53.4187" id="PasswordPolicy" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="123.2" x="173.6" y="462.7"/><ellipse cx="198.59" cy="477.6461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M199.99,475.1961 Q200.1322,474.8461 200.2962,474.6711 Q200.4603,474.4961 200.6462,474.4961 Q200.9744,474.4961 201.1822,474.693 Q201.39,474.8898 201.39,475.3492 L201.39,476.443 Q201.39,476.9023 201.1931,477.0992 Q200.9962,477.2961 200.69,477.2961 Q200.4166,477.2961 200.2416,477.1758 Q200.0666,477.0555 199.99,476.7383 Q199.9572,476.5195 199.8369,476.3992 Q199.6181,476.1695 199.2244,476.0383 Q198.8306,475.8961 198.4369,475.8961 Q197.9447,475.8961 197.5291,476.093 Q197.1244,476.2898 196.8072,476.7273 Q196.49,477.1648 196.49,477.7664 L196.49,478.4117 Q196.49,479.1336 197.0806,479.6148 Q197.6712,480.0961 198.7212,480.0961 Q199.3447,480.0961 199.7822,479.9539 Q200.0337,479.8773 200.3181,479.6258 Q200.5041,479.4836 200.6025,479.4398 Q200.7009,479.3961 200.8212,479.3961 Q201.0509,479.3961 201.215,479.582 Q201.39,479.757 201.39,480.0086 Q201.39,480.2492 201.1494,480.5336 Q200.7994,480.9492 200.2416,481.1789 Q199.5087,481.4961 198.6119,481.4961 Q197.5619,481.4961 196.7197,481.0805 Q196.0416,480.7523 195.5603,480.0414 Q195.09,479.3305 195.09,478.4883 L195.09,477.7227 Q195.09,476.8477 195.5056,476.082 Q195.9322,475.3164 196.665,474.9117 Q197.4087,474.4961 198.24,474.4961 Q198.7431,474.4961 199.1806,474.6711 Q199.6181,474.8461 199.99,475.1961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.1" x="227.36" y="474.9199">«service»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="68.6" x="211.61" y="486.9389">PasswordPolicy</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="174.3" x2="296.1" y1="492.5922" y2="492.5922"/><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="174.3" x2="296.1" y1="498.1922" y2="498.1922"/><ellipse cx="181.3" cy="508.2055" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="105" x="187.6" y="511.1654">isSatisfiedBy(password)</text></g><!--MD5=[c5b08e60048ef1bcd788d24cf324082e]
class UserSession--><g id="elem_UserSession"><rect codeLine="143" fill="#F1F1F1" height="90.3984" id="UserSession" rx="1.75" ry="1.75" style="stroke:#181818;stroke-width:0.3499999999999999;" width="159.6" x="210.7" y="625.1"/><ellipse cx="259.875" cy="640.0461" fill="#ADD1B2" rx="7.7" ry="7.7" style="stroke:#181818;stroke-width:0.6999999999999998;"/><path d="M261.275,637.5961 Q261.4172,637.2461 261.5812,637.0711 Q261.7453,636.8961 261.9312,636.8961 Q262.2594,636.8961 262.4672,637.093 Q262.675,637.2898 262.675,637.7492 L262.675,638.843 Q262.675,639.3023 262.4781,639.4992 Q262.2812,639.6961 261.975,639.6961 Q261.7016,639.6961 261.5266,639.5758 Q261.3516,639.4555 261.275,639.1383 Q261.2422,638.9195 261.1219,638.7992 Q260.9031,638.5695 260.5094,638.4383 Q260.1156,638.2961 259.7219,638.2961 Q259.2297,638.2961 258.8141,638.493 Q258.4094,638.6898 258.0922,639.1273 Q257.775,639.5648 257.775,640.1664 L257.775,640.8117 Q257.775,641.5336 258.3656,642.0148 Q258.9562,642.4961 260.0062,642.4961 Q260.6297,642.4961 261.0672,642.3539 Q261.3187,642.2773 261.6031,642.0258 Q261.7891,641.8836 261.8875,641.8398 Q261.9859,641.7961 262.1062,641.7961 Q262.3359,641.7961 262.5,641.982 Q262.675,642.157 262.675,642.4086 Q262.675,642.6492 262.4344,642.9336 Q262.0844,643.3492 261.5266,643.5789 Q260.7937,643.8961 259.8969,643.8961 Q258.8469,643.8961 258.0047,643.4805 Q257.3266,643.1523 256.8453,642.4414 Q256.375,641.7305 256.375,640.8883 L256.375,640.1227 Q256.375,639.2477 256.7906,638.482 Q257.2172,637.7164 257.95,637.3117 Q258.6937,636.8961 259.525,636.8961 Q260.0281,636.8961 260.4656,637.0711 Q260.9031,637.2461 261.275,637.5961 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="56.7" x="273.525" y="637.3199">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="55.3" x="274.225" y="649.3389">UserSession</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="211.4" x2="369.6" y1="654.9922" y2="654.9922"/><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="216.3" y="662.9055"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="141.4" x="224.7" y="667.9654">authenticatedUser : SystemUser</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="216.3" y="675.232"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="79.1" x="224.7" y="680.292">UUID token : UUID</text><rect fill="none" height="4.2" style="stroke:#C82930;stroke-width:0.6999999999999998;" width="4.2" x="216.3" y="687.5586"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="93.1" x="224.7" y="692.6186">startedOn : Calendar</text><line style="stroke:#181818;stroke-width:0.3499999999999999;" x1="211.4" x2="369.6" y1="697.5719" y2="697.5719"/><ellipse cx="218.4" cy="707.5852" fill="#84BE84" rx="2.1" ry="2.1" style="stroke:#038048;stroke-width:0.6999999999999998;"/><text fill="#000000" font-family="sans-serif" font-size="9.8" lengthAdjust="spacing" textLength="81.9" x="224.7" y="710.5451">UserSession(user)</text></g><!--MD5=[3d2b0370d2fa1c3d90b0543433a55286]
reverse link Set to RoleSet--><g id="link_Set_RoleSet"><path d="M1165.997,990.738 C1165.528,999.565 1165.017,1009.274 1164.541,1018.36 " fill="none" id="Set-backto-RoleSet" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1161.118,990.276,1166.746,976.556,1170.904,990.794,1161.118,990.276" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[bbc6a939dd924cc0b2e70146c015ac20]
link ActivateUserController to AuthorizationService--><g id="link_ActivateUserController_AuthorizationService"><path codeLine="155" d="M288.015,238.889 C268.107,251.391 246.05,265.237 224.665,278.663 " fill="none" id="ActivateUserController-to-AuthorizationService" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="221.515,280.644,228.339,279.6628,224.4785,278.7818,225.3595,274.9213,221.515,280.644" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[721370847c96419475666d9118147c6c]
link ActivateUserUI to ActivateUserController--><g id="link_ActivateUserUI_ActivateUserController"><path codeLine="156" d="M359.1,95.431 C359.1,110.306 359.1,128.247 359.1,144.662 " fill="none" id="ActivateUserUI-to-ActivateUserController" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="359.1,148.351,361.9,142.051,359.1,144.851,356.3,142.051,359.1,148.351" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[a74372773ca43ed79bb6fd25af840d38]
link ActivateUserController to UserManagementService--><g id="link_ActivateUserController_UserManagementService"><path codeLine="157" d="M438.991,238.763 C461.979,251.937 486.955,266.616 509.6,280.7 C518.056,285.957 526.848,291.613 535.507,297.29 " fill="none" id="ActivateUserController-to-UserManagementService" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="538.44,299.215,534.7052,293.42,535.5125,297.2967,531.6359,298.104,538.44,299.215" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[5f40d7ef9d0060e73af9ce8686cfc92e]
link SystemUser to FullName--><g id="link_SystemUser_FullName"><path codeLine="160" d="M976.878,770.112 C964.88,785.638 953.085,800.905 942.844,814.149 " fill="none" id="SystemUser-to-FullName" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="940.555,817.117,946.6224,813.8433,942.6948,814.3473,942.1908,810.4197,940.555,817.117" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[a00b48498abbf4d3aa5edbf04235e8b3]
link SystemUser to Password--><g id="link_SystemUser_Password"><path codeLine="161" d="M1112.741,770.189 C1129.828,812 1138.865,860.286 1117.9,900.9 C1089.9,955.15 1032.647,994.287 984.375,1019.284 " fill="none" id="SystemUser-to-Password" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="981.211,1020.908,988.0955,1020.5422,984.3294,1019.3188,985.5528,1015.5527,981.211,1020.908" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[14d1a09acbd2a86c46c8e0adbba04549]
link SystemUser to EmailAddress--><g id="link_SystemUser_EmailAddress"><path codeLine="162" d="M905.884,770.112 C880.978,786.842 856.513,803.278 835.786,817.201 " fill="none" id="SystemUser-to-EmailAddress" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="832.755,819.238,839.5426,818.0301,835.6548,817.2781,836.4068,813.3904,832.755,819.238" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[8fd088f9363de2db7451b770fad45cc2]
link SystemUser to ShortName--><g id="link_SystemUser_ShortName"><path codeLine="163" d="M1050.119,770.112 C1049.601,785.372 1049.09,800.387 1048.642,813.477 " fill="none" id="SystemUser-to-ShortName" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="1048.516,817.117,1051.5302,810.9166,1048.6359,813.6191,1045.9335,810.7248,1048.516,817.117" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[355d05d6de50819a91dcbeed962da43b]
link UserSession to SystemUser--><g id="link_UserSession_SystemUser"><path codeLine="164" d="M370.405,637.119 C456.246,603.456 597.52,553.588 724.85,534.1 C755.755,529.368 835.002,527.45 865.55,534.1 C892.962,540.071 919.366,552.86 943.278,568.323 " fill="none" id="UserSession-to-SystemUser" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="946.484,570.423,942.7492,564.628,943.5565,568.5047,939.6799,569.312,946.484,570.423" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[51777fa5f2d524d4088e82040ea93a10]
link AuthorizationService to UserSession--><g id="link_AuthorizationService_UserSession"><path codeLine="165" d="M126.525,408.177 C131.663,444.906 141.645,491.183 161,528.5 C179.389,563.948 209.034,597.184 235.319,622.482 " fill="none" id="AuthorizationService-to-UserSession" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="237.853,624.904,235.2358,618.5259,235.3238,622.4847,231.3649,622.5727,237.853,624.904" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[dd01f312a1a31f5c58fd232e6e753f0a]
link AuthenticationService to AuthorizationService--><g id="link_AuthenticationService_AuthorizationService"><path codeLine="166" d="M251.083,344.4 C244.111,344.4 237.139,344.4 230.167,344.4 " fill="none" id="AuthenticationService-to-AuthorizationService" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="226.52,344.4,232.82,347.2,230.02,344.4,232.82,341.6,226.52,344.4" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[56cff2aa35e6cbb5a4b3b585c15b534a]
link AuthenticationService to Role--><g id="link_AuthenticationService_Role"><path codeLine="167" d="M497.735,407.785 C513.044,420.007 527.002,434.091 537.6,450.1 C592.228,532.63 575.4,570.577 575.4,669.55 C575.4,669.55 575.4,669.55 575.4,1131.9 C575.4,1242.969 747.404,1266.867 828.912,1271.956 " fill="none" id="AuthenticationService-to-Role" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="832.482,1272.166,826.3616,1268.9927,828.9883,1271.9558,826.0252,1274.5825,832.482,1272.166" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[556368b0dc0754eda9e92a0b3e129342]
link AuthenticationService to Password--><g id="link_AuthenticationService_Password"><path codeLine="168" d="M497.756,402.773 C546.595,425.873 591.759,447.657 593.6,450.1 C653.275,529.053 631.4,570.577 631.4,669.55 C631.4,669.55 631.4,669.55 631.4,857.15 C631.4,940.443 716.366,991.837 791.371,1020.985 " fill="none" id="AuthenticationService-to-Password" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="794.71,1022.266,789.8251,1017.4011,791.4407,1021.0163,787.8255,1022.6319,794.71,1022.266" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[46b3713f55f7be2bf8c1dff280b713b4]
link AuthenticationService to EmailAddress--><g id="link_AuthenticationService_EmailAddress"><path codeLine="169" d="M497.784,403.193 C501.991,404.887 506.17,406.532 510.3,408.1 C570.738,431.095 606.228,402.136 649.6,450.1 C746.753,557.536 652.043,638.099 711.9,770 C718.039,783.524 726.698,796.845 735.749,808.815 " fill="none" id="AuthenticationService-to-EmailAddress" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="738.059,811.825,736.4383,805.124,735.9255,809.0504,731.999,808.5376,738.059,811.825" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[4fba07f5ae7fc2ebff05bb0b153d6c8e]
link AuthenticationService to PasswordEncoder--><g id="link_AuthenticationService_PasswordEncoder"><path codeLine="170" d="M396.06,408.247 C400.498,421.239 405.062,434.609 409.171,446.628 " fill="none" id="AuthenticationService-to-PasswordEncoder" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="410.312,449.981,410.9264,443.1142,409.1812,446.6687,405.6267,444.9235,410.312,449.981" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[a315b212f5722cf0f8fe1b5f91cf190f]
link AuthenticationService to PasswordPolicy--><g id="link_AuthenticationService_PasswordPolicy"><path codeLine="171" d="M313.201,408.247 C295.603,426.377 277.284,445.242 262.829,460.138 " fill="none" id="AuthenticationService-to-PasswordPolicy" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="260.358,462.686,266.757,460.1204,262.7976,460.1764,262.7416,456.217,260.358,462.686" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[45e1401b0d4fa0ea16e4baa7e0cf3aa8]
link RoleSet to RoleAssignment--><g id="link_RoleSet_RoleAssignment"><path codeLine="172" d="M1148.833,1089.214 C1135.547,1122.429 1115.212,1173.263 1099.28,1213.107 " fill="none" id="RoleSet-to-RoleAssignment" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1097.943,1216.439,1102.8825,1211.6295,1099.2429,1213.1893,1097.683,1209.5497,1097.943,1216.439" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[94ccdb2a9334601dc2d1e0d756dd9d0f]
link RoleAssignment to Role--><g id="link_RoleAssignment_Role"><path codeLine="173" d="M987.945,1274 C962.906,1274 937.86,1274 912.821,1274 " fill="none" id="RoleAssignment-to-Role" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="909.125,1274,915.425,1276.8,912.625,1274,915.425,1271.2,909.125,1274" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[4b3459968d088df87e9815732244c564]
link UserManagementService to SystemUserBuilder--><g id="link_UserManagementService_SystemUserBuilder"><path codeLine="175" d="M652.365,389.564 C669.851,407.197 688.695,428.428 702.8,450.1 C727.223,487.634 747.411,532.749 762.573,572.292 " fill="none" id="UserManagementService-to-SystemUserBuilder" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="763.833,575.61,764.1989,568.7255,762.5833,572.3407,758.9681,570.7251,763.833,575.61" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[70f515139769217ce8852e9134711a94]
link SystemUser to RoleSet--><g id="link_SystemUser_RoleSet"><path codeLine="177" d="M1123.115,770.042 C1153.32,819.462 1184.848,881.657 1198.4,942.9 C1203.804,967.33 1195.537,994.035 1185.604,1015.049 " fill="none" id="SystemUser-to-RoleSet" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="1183.994,1018.367,1189.2537,1013.9099,1185.5151,1015.2148,1184.2102,1011.4762,1183.994,1018.367" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[137dab0f304d11d41381903e70413919]
link SystemUserBuilder to SystemUser--><g id="link_SystemUserBuilder_SystemUser"><path codeLine="178" d="M865.319,670.25 C872.207,670.25 879.095,670.25 885.976,670.25 " fill="none" id="SystemUserBuilder-to-SystemUser" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="889.581,670.25,883.281,667.45,886.081,670.25,883.281,673.05,889.581,670.25" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[18f98f898b33518a07ec32b030c48693]
link UserManagementService to UserRepository--><g id="link_UserManagementService_UserRepository"><path codeLine="179" d="M684.425,352.947 C811.671,368.823 1061.074,414.61 1228.5,539.7 C1262.66,565.222 1287.608,608.398 1301.769,637.896 " fill="none" id="UserManagementService-to-UserRepository" style="stroke:#181818;stroke-width:0.6999999999999998;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1303.274,641.067,1303.1019,634.1749,1301.7731,637.9051,1298.0429,636.5764,1303.274,641.067" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[dabe728235bc0ea6fdae2c1a3266723a]
link UserRepository to SystemUser--><g id="link_UserRepository_SystemUser"><path codeLine="183" d="M1256.78,670.25 C1244.88,670.25 1232.973,670.25 1221.073,670.25 " fill="none" id="UserRepository-to-SystemUser" style="stroke:#181818;stroke-width:0.6999999999999998;"/><polygon fill="#181818" points="1217.384,670.25,1223.684,673.05,1220.884,670.25,1223.684,667.45,1217.384,670.25" style="stroke:#181818;stroke-width:0.6999999999999998;"/></g><!--MD5=[31f0f3604d89e8c3e376f283a220601b]
@startuml
'https://plantuml.com/class-diagram

package "presentation" #DDDDDD{
    class ActivateUserUI <<ui>>{
    - theController : ActivateUserController
    + doShow()
    }
}



package "domain" #dbd8ae{


        class Role <<value object>>{
        -roleName
        +Role(name)
        }

        class RoleAssignment <<value object>>{
               -pk
               -type
               - assignedOn
               - unassignedOn
               - expired
               +RoleAssignment(type, assignedOn)
        }

        class RoleSet implements Set{
        -assignments
        +add(role)
        +hasAssignment(role)
        }


        class SystemUser <<aggregate root>> <<entity>>{
        - email : EmailAddress
        - password : Password
        - fullName : FullName
        - shortName : ShortName
        - roles : RoleSet
        - createdOn : Calendar
        - active : boolean
        - activatedOn : Calendar
        - activatedOn : Calendar
        + SystemUser (email, password, fullName, shortName, roles, createdOn)
        + init(email, password, fullName, shortName, roles, createdOn)
        + activate(activatedOn)
        }

        class EmailAddress <<value object>> <<id>>{
         -email : String
         +valueOf(email)
         +EmailAddress(email)
        }

        class Password <<value object>>{
        - Password : String
        +encodedAndValid(password, policy, encoder)
        }

        class FullName <<value object>>{
        -fullName : String
         +valueOf(fullName)
        +FullName (fullName)
        }

        class ShortName<<value object>>{
        -shortName : String
         +valueOf(shortName)
        + FullName (shortName)
        }

        class SystemUserBuilder<<factory>>{
        - email : EmailAddress
        - password : Password
        - fullName : FullName
        - shortName : ShortName
        - roles : RoleSet
        - createdOn : Calendar
        + withEmail (email)
        + withPassword (password)
        + withFullName (pfullName)
        + withShortName (shortName)
        + withRoles (roles)
        + build ();
        }

}
    package "persistence" #dbd8ae{
       interface UserRepository{
       findByActive(false)
       save(user : SystemUser)
       }
    }
package "application" #eaf4d3{
    class ActivateUserController <<controller>>{
        - authz : AuthorizationService
        - userSvc : UserManagementService
        + activeUsers ()
        + activateUser(user)

    }

    class AuthorizationService <<service>>{
        - userSession : UserSession
        + createSessionForUser(user)
        + clearSession()
        + hasSession()
        + session()
        + isAuthenticatedUserAuthorizedTo (action)
        + ensureAuthenticatedUserHasAnyOf (action)
    }

    class AuthenticationService <<service>>{
        - repo : UserRepository
        - authz : AuthorizationService
        - policy : PasswordPolicy
        - encoder : PasswordEncoder
        + AuthenticationService (repo, authz, policy, encoder)
        + authenticate(email, rawPassword, requiredRoles)
        + retrieveUser(email)
    }

    class UserManagementService <<service>>{
         - userRepository : UserRepository
         - encoder : PasswordEncoder
         - policy : PasswordPolicy
         + activateUser(user)
    }

    class PasswordEncoder <<service>>{
        +encode(rawPassword)
        +matches(rawPassword,encodedPassword)
        +upgradeEncoding(encodedPassword)
    }

    class PasswordPolicy <<service>>{
       +isSatisfiedBy(password)
    }


    class UserSession <<value object>>{
        -authenticatedUser : SystemUser
        -UUID token : UUID
        -startedOn : Calendar
        + UserSession(user)
    }
}

interface Set{
}


ActivateUserController .-> AuthorizationService
ActivateUserUI .-> ActivateUserController
ActivateUserController .-> UserManagementService


SystemUser - -> FullName
SystemUser - - - -> Password
SystemUser - -> EmailAddress
SystemUser - -> ShortName
UserSession .> SystemUser
AuthorizationService .- -> UserSession
AuthenticationService .> AuthorizationService
AuthenticationService .> Role
AuthenticationService .> Password
AuthenticationService .-> EmailAddress
AuthenticationService .-> PasswordEncoder
AuthenticationService .-> PasswordPolicy
RoleSet .- - -> RoleAssignment
RoleAssignment -> Role

UserManagementService .-> SystemUserBuilder

SystemUser - - - -> RoleSet
SystemUserBuilder .> SystemUser
UserManagementService .> UserRepository



UserRepository -> SystemUser

@enduml

@startuml

package "presentation" #DDDDDD{
    class ActivateUserUI <<ui>>{
    - theController : ActivateUserController
    + doShow()
    }
}



package "domain" #dbd8ae{


        class Role <<value object>>{
        -roleName
        +Role(name)
        }

        class RoleAssignment <<value object>>{
               -pk
               -type
               - assignedOn
               - unassignedOn
               - expired
               +RoleAssignment(type, assignedOn)
        }

        class RoleSet implements Set{
        -assignments
        +add(role)
        +hasAssignment(role)
        }


        class SystemUser <<aggregate root>> <<entity>>{
        - email : EmailAddress
        - password : Password
        - fullName : FullName
        - shortName : ShortName
        - roles : RoleSet
        - createdOn : Calendar
        - active : boolean
        - activatedOn : Calendar
        - activatedOn : Calendar
        + SystemUser (email, password, fullName, shortName, roles, createdOn)
        + init(email, password, fullName, shortName, roles, createdOn)
        + activate(activatedOn)
        }

        class EmailAddress <<value object>> <<id>>{
         -email : String
         +valueOf(email)
         +EmailAddress(email)
        }

        class Password <<value object>>{
        - Password : String
        +encodedAndValid(password, policy, encoder)
        }

        class FullName <<value object>>{
        -fullName : String
         +valueOf(fullName)
        +FullName (fullName)
        }

        class ShortName<<value object>>{
        -shortName : String
         +valueOf(shortName)
        + FullName (shortName)
        }

        class SystemUserBuilder<<factory>>{
        - email : EmailAddress
        - password : Password
        - fullName : FullName
        - shortName : ShortName
        - roles : RoleSet
        - createdOn : Calendar
        + withEmail (email)
        + withPassword (password)
        + withFullName (pfullName)
        + withShortName (shortName)
        + withRoles (roles)
        + build ();
        }

}
    package "persistence" #dbd8ae{
       interface UserRepository{
       findByActive(false)
       save(user : SystemUser)
       }
    }
package "application" #eaf4d3{
    class ActivateUserController <<controller>>{
        - authz : AuthorizationService
        - userSvc : UserManagementService
        + activeUsers ()
        + activateUser(user)

    }

    class AuthorizationService <<service>>{
        - userSession : UserSession
        + createSessionForUser(user)
        + clearSession()
        + hasSession()
        + session()
        + isAuthenticatedUserAuthorizedTo (action)
        + ensureAuthenticatedUserHasAnyOf (action)
    }

    class AuthenticationService <<service>>{
        - repo : UserRepository
        - authz : AuthorizationService
        - policy : PasswordPolicy
        - encoder : PasswordEncoder
        + AuthenticationService (repo, authz, policy, encoder)
        + authenticate(email, rawPassword, requiredRoles)
        + retrieveUser(email)
    }

    class UserManagementService <<service>>{
         - userRepository : UserRepository
         - encoder : PasswordEncoder
         - policy : PasswordPolicy
         + activateUser(user)
    }

    class PasswordEncoder <<service>>{
        +encode(rawPassword)
        +matches(rawPassword,encodedPassword)
        +upgradeEncoding(encodedPassword)
    }

    class PasswordPolicy <<service>>{
       +isSatisfiedBy(password)
    }


    class UserSession <<value object>>{
        -authenticatedUser : SystemUser
        -UUID token : UUID
        -startedOn : Calendar
        + UserSession(user)
    }
}

interface Set{
}


ActivateUserController .-> AuthorizationService
ActivateUserUI .-> ActivateUserController
ActivateUserController .-> UserManagementService


SystemUser - -> FullName
SystemUser - - - -> Password
SystemUser - -> EmailAddress
SystemUser - -> ShortName
UserSession .> SystemUser
AuthorizationService .- -> UserSession
AuthenticationService .> AuthorizationService
AuthenticationService .> Role
AuthenticationService .> Password
AuthenticationService .-> EmailAddress
AuthenticationService .-> PasswordEncoder
AuthenticationService .-> PasswordPolicy
RoleSet .- - -> RoleAssignment
RoleAssignment -> Role

UserManagementService .-> SystemUserBuilder

SystemUser - - - -> RoleSet
SystemUserBuilder .> SystemUser
UserManagementService .> UserRepository



UserRepository -> SystemUser

@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>