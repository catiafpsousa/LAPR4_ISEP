<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="819px" preserveAspectRatio="none" style="width:1299px;height:819px;background:#FFFFFF;" version="1.1" viewBox="0 0 1299 819" width="1299px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="585.2734" style="stroke:#181818;stroke-width:1.0;" width="10" x="169" y="118.5703"/><rect fill="#FFFFFF" height="524.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="322" y="179.2734"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="721" y="209.625"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="721" y="510.4375"/><rect fill="#FFFFFF" height="412.5156" style="stroke:#181818;stroke-width:1.0;" width="10" x="897" y="300.3281"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1234.5" y="330.6797"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1234.5" y="631.4922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="86.2188" y2="721.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="173.5" x2="173.5" y1="86.2188" y2="721.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="327" x2="327" y1="86.2188" y2="721.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="725.5" x2="725.5" y1="86.2188" y2="721.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="901.5" x2="901.5" y1="86.2188" y2="721.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1133" x2="1133" y1="86.2188" y2="721.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1239" x2="1239" y1="86.2188" y2="721.8438"/><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="83.1426">Manager</text><ellipse cx="36" cy="17.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36,25.1094 L36,52.1094 M23,33.1094 L49,33.1094 M36,52.1094 L23,67.1094 M36,52.1094 L49,67.1094 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="735.377">Manager</text><ellipse cx="36" cy="746.9531" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M36,754.9531 L36,781.9531 M23,762.9531 L49,762.9531 M36,781.9531 L23,796.9531 M36,781.9531 L49,796.9531 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="119.5" y="36"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="126.5" y="57.5332">«presentation»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="94" x="127" y="75.1426">CloseCourseUI</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="119.5" y="720.8438"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="126.5" y="742.377">«presentation»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="94" x="127" y="759.9863">CloseCourseUI</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="248" y="36"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="285" y="57.5332">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="144" x="255" y="75.1426">CloseCourseController</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="248" y="720.8438"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="285" y="742.377">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="144" x="255" y="759.9863">CloseCourseController</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="654.5" y="36"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="684" y="57.5332">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="129" x="661.5" y="75.1426">AuthorizationService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="654.5" y="720.8438"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="684" y="742.377">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="129" x="661.5" y="759.9863">AuthorizationService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="807.5" y="36"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="860" y="57.5332">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="175" x="814.5" y="75.1426">CourseManagementService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="807.5" y="720.8438"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="860" y="742.377">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="175" x="814.5" y="759.9863">CourseManagementService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="1095" y="36"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1102" y="57.5332">«domain»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="46" x="1110" y="75.1426">Course</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="1095" y="720.8438"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="1102" y="742.377">«domain»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="46" x="1110" y="759.9863">Course</text><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="1197" y="65.5332">«repository»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="111" x="1181" y="83.1426">courseRepository</text><path d="M1221.5,15 C1221.5,5 1239.5,5 1239.5,5 C1239.5,5 1257.5,5 1257.5,15 L1257.5,41 C1257.5,51 1239.5,51 1239.5,51 C1239.5,51 1221.5,51 1221.5,41 L1221.5,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1221.5,15 C1221.5,25 1239.5,25 1239.5,25 C1239.5,25 1257.5,25 1257.5,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="FG Virgil" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="1197" y="735.377">«repository»</text><text fill="#000000" font-family="FG Virgil" font-size="14" lengthAdjust="spacing" textLength="111" x="1181" y="752.9863">courseRepository</text><path d="M1221.5,766.0625 C1221.5,756.0625 1239.5,756.0625 1239.5,756.0625 C1239.5,756.0625 1257.5,756.0625 1257.5,766.0625 L1257.5,792.0625 C1257.5,802.0625 1239.5,802.0625 1239.5,802.0625 C1239.5,802.0625 1221.5,802.0625 1221.5,792.0625 L1221.5,766.0625 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1221.5,766.0625 C1221.5,776.0625 1239.5,776.0625 1239.5,776.0625 C1239.5,776.0625 1257.5,776.0625 1257.5,766.0625 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="585.2734" style="stroke:#181818;stroke-width:1.0;" width="10" x="169" y="118.5703"/><rect fill="#FFFFFF" height="524.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="322" y="179.2734"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="721" y="209.625"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="721" y="510.4375"/><rect fill="#FFFFFF" height="412.5156" style="stroke:#181818;stroke-width:1.0;" width="10" x="897" y="300.3281"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1234.5" y="330.6797"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1234.5" y="631.4922"/><polygon fill="#181818" points="157,114.5703,167,118.5703,157,122.5703,161,118.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="163" y1="118.5703" y2="118.5703"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="78" x="43" y="113.7139">opens course</text><polygon fill="#181818" points="315,144.9219,325,148.9219,315,152.9219,319,148.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179" x2="321" y1="148.9219" y2="148.9219"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="36" x="186" y="144.0654">create</text><polygon fill="#181818" points="310,175.2734,320,179.2734,310,183.2734,314,179.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179" x2="316" y1="179.2734" y2="179.2734"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="117" x="186" y="174.417">nonClosedCourses()</text><polygon fill="#181818" points="709,205.625,719,209.625,709,213.625,713,209.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="715" y1="209.625" y2="209.625"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="370" x="339" y="204.7686">ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)</text><polygon fill="#181818" points="890,265.9766,900,269.9766,890,273.9766,894,269.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="332" x2="896" y1="269.9766" y2="269.9766"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="36" x="339" y="265.1201">create</text><polygon fill="#181818" points="885,296.3281,895,300.3281,885,304.3281,889,300.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="891" y1="300.3281" y2="300.3281"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="117" x="339" y="295.4717">nonClosedCourses()</text><polygon fill="#181818" points="1222.5,326.6797,1232.5,330.6797,1222.5,334.6797,1226.5,330.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="907" x2="1228.5" y1="330.6797" y2="330.6797"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="267" x="914" y="325.8232">nonClosedCourses = findByClosedState(false)</text><polygon fill="#181818" points="918,340.6797,908,344.6797,918,348.6797,914,344.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="912" x2="1238.5" y1="344.6797" y2="344.6797"/><polygon fill="#181818" points="343,354.6797,333,358.6797,343,362.6797,339,358.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="337" x2="896" y1="358.6797" y2="358.6797"/><polygon fill="#181818" points="190,385.0313,180,389.0313,190,393.0313,186,389.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="184" x2="321" y1="389.0313" y2="389.0313"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="109" x="196" y="384.1748">nonClosedCourses</text><polygon fill="#181818" points="47,415.3828,37,419.3828,47,423.3828,43,419.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="41" x2="168" y1="419.3828" y2="419.3828"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="109" x="53" y="414.5264">list closed courses</text><polygon fill="#181818" points="157,445.7344,167,449.7344,157,453.7344,161,449.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="163" y1="449.7344" y2="449.7344"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="85" x="43" y="444.8779">selects course</text><polygon fill="#181818" points="310,476.0859,320,480.0859,310,484.0859,314,480.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="179" x2="316" y1="480.0859" y2="480.0859"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="119" x="186" y="475.2295">closeCourse(course)</text><polygon fill="#181818" points="709,506.4375,719,510.4375,709,514.4375,713,510.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="715" y1="510.4375" y2="510.4375"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="370" x="339" y="505.5811">ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)</text><polygon fill="#181818" points="885,566.7891,895,570.7891,885,574.7891,889,570.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="332" x2="891" y1="570.7891" y2="570.7891"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="119" x="339" y="565.9326">closeCourse(course)</text><polygon fill="#181818" points="1121,597.1406,1131,601.1406,1121,605.1406,1125,601.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="907" x2="1127" y1="601.1406" y2="601.1406"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="202" x="914" y="596.2842">close(CurrentTimeCalendars.now())</text><polygon fill="#181818" points="1222.5,627.4922,1232.5,631.4922,1222.5,635.4922,1226.5,631.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="907" x2="1228.5" y1="631.4922" y2="631.4922"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="73" x="914" y="626.6357">save(course)</text><polygon fill="#181818" points="918,641.4922,908,645.4922,918,649.4922,914,645.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="912" x2="1238.5" y1="645.4922" y2="645.4922"/><polygon fill="#181818" points="343,655.4922,333,659.4922,343,663.4922,339,659.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="337" x2="896" y1="659.4922" y2="659.4922"/><polygon fill="#181818" points="190,669.4922,180,673.4922,190,677.4922,186,673.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="184" x2="321" y1="673.4922" y2="673.4922"/><polygon fill="#181818" points="47,699.8438,37,703.8438,47,707.8438,43,703.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="41" x2="173" y1="703.8438" y2="703.8438"/><text fill="#000000" font-family="FG Virgil" font-size="13" lengthAdjust="spacing" textLength="101" x="53" y="698.9873">displays success</text><!--MD5=[f7028eec49d7e7901698a6e09948d611]
@startuml
'http://plantuml.com/skinparam.html
skinparam handwritten false
skinparam packageStyle rect
skinparam defaultFontName FG Virgil
skinparam shadowing false

actor Manager as Actor
participant CloseCourseUI as UI <<presentation>>
participant CloseCourseController as Controller <<application>>
participant AuthorizationService  as authz <<application>>
participant CourseManagementService as courseSvc <<application>>

participant Course as course <<domain>>

database courseRepository as Repository <<repository>>


Actor - -> UI: opens course
activate UI
    UI -> Controller: create

    UI -> Controller: nonClosedCourses()
    activate Controller

        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
        activate authz
        deactivate authz
        Controller - -> courseSvc : create


Controller -> courseSvc : nonClosedCourses()
 activate courseSvc

            courseSvc -> Repository: nonClosedCourses = findByClosedState(false)
            activate Repository

            Repository - -> courseSvc
            deactivate Repository
            courseSvc - -> Controller
            Controller - -> UI : nonClosedCourses





        UI- ->Actor: list closed courses

        Actor - -> UI : selects course
        UI -> Controller : closeCourse(course)
        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
                activate authz
                deactivate authz
        Controller -> courseSvc : closeCourse(course)
        courseSvc ->  course : close(CurrentTimeCalendars.now())
        courseSvc ->  Repository : save(course)
        activate Repository
        Repository - -> courseSvc
        deactivate Repository
         courseSvc - ->  Controller
         Controller - -> UI
         UI - -> Actor : displays success

         deactivate Controller
deactivate UI
@enduml

@startuml
skinparam handwritten false
skinparam packageStyle rect
skinparam defaultFontName FG Virgil
skinparam shadowing false

actor Manager as Actor
participant CloseCourseUI as UI <<presentation>>
participant CloseCourseController as Controller <<application>>
participant AuthorizationService  as authz <<application>>
participant CourseManagementService as courseSvc <<application>>

participant Course as course <<domain>>

database courseRepository as Repository <<repository>>


Actor - -> UI: opens course
activate UI
    UI -> Controller: create

    UI -> Controller: nonClosedCourses()
    activate Controller

        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
        activate authz
        deactivate authz
        Controller - -> courseSvc : create


Controller -> courseSvc : nonClosedCourses()
 activate courseSvc

            courseSvc -> Repository: nonClosedCourses = findByClosedState(false)
            activate Repository

            Repository - -> courseSvc
            deactivate Repository
            courseSvc - -> Controller
            Controller - -> UI : nonClosedCourses





        UI- ->Actor: list closed courses

        Actor - -> UI : selects course
        UI -> Controller : closeCourse(course)
        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
                activate authz
                deactivate authz
        Controller -> courseSvc : closeCourse(course)
        courseSvc ->  course : close(CurrentTimeCalendars.now())
        courseSvc ->  Repository : save(course)
        activate Repository
        Repository - -> courseSvc
        deactivate Repository
         courseSvc - ->  Controller
         Controller - -> UI
         UI - -> Actor : displays success

         deactivate Controller
deactivate UI
@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>