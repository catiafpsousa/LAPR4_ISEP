<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="655.2px" preserveAspectRatio="none" style="width:1073px;height:655px;background:#FFFFFF;" version="1.1" viewBox="0 0 1073 655" width="1073.6px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="468.2188" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="149.6" y="94.8563"/><rect fill="#FFFFFF" height="419.6563" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="292" y="143.4188"/><rect fill="#FFFFFF" height="24" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="611.2" y="167.7"/><rect fill="#FFFFFF" height="24" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="611.2" y="408.35"/><rect fill="#FFFFFF" height="330.0125" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="752" y="240.2625"/><rect fill="#FFFFFF" height="11.2" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1022" y="264.5438"/><rect fill="#FFFFFF" height="11.2" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1022" y="505.1938"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="28.8" x2="28.8" y1="68.975" y2="577.475"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="153.2" x2="153.2" y1="68.975" y2="577.475"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="295.6" x2="295.6" y1="68.975" y2="577.475"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="614.8" x2="614.8" y1="68.975" y2="577.475"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="755.6" x2="755.6" y1="68.975" y2="577.475"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="940.8" x2="940.8" y1="68.975" y2="577.475"/><line style="stroke:#181818;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1025.6" x2="1025.6" y1="68.975" y2="577.475"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="44.8" x="4" y="66.5141">Manager</text><ellipse cx="28.8" cy="13.6875" fill="#E2E2F0" rx="6.4" ry="6.4" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M28.8,20.0875 L28.8,41.6875 M18.4,26.4875 L39.2,26.4875 M28.8,41.6875 L18.4,53.6875 M28.8,41.6875 L39.2,53.6875 " fill="none" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="44.8" x="4" y="588.3016">Manager</text><ellipse cx="28.8" cy="597.5625" fill="#E2E2F0" rx="6.4" ry="6.4" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M28.8,603.9625 L28.8,625.5625 M18.4,610.3625 L39.2,610.3625 M28.8,625.5625 L18.4,637.5625 M28.8,625.5625 L39.2,637.5625 " fill="none" style="stroke:#181818;stroke-width:0.4000000000000001;"/><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108" x="99.6" y="28.8"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="76" x="115.6" y="46.0266">«presentation»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="96.8" x="105.2" y="60.1141">OpenEnrollmentsUI</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108" x="99.6" y="576.675"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="76" x="115.6" y="593.9016">«presentation»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="96.8" x="105.2" y="607.9891">OpenEnrollmentsUI</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="148" x="222" y="28.8"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="67.2" x="262.4" y="46.0266">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="136.8" x="227.6" y="60.1141">OpenEnrollmentsController</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="148" x="222" y="576.675"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="67.2" x="262.4" y="593.9016">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="136.8" x="227.6" y="607.9891">OpenEnrollmentsController</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="114.4" x="558" y="28.8"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="67.2" x="581.6" y="46.0266">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="103.2" x="563.6" y="60.1141">AuthorizationService</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="114.4" x="558" y="576.675"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="67.2" x="581.6" y="593.9016">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="103.2" x="563.6" y="607.9891">AuthorizationService</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="151.2" x="680.4" y="28.8"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="67.2" x="722.4" y="46.0266">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="140" x="686" y="60.1141">CourseManagementService</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="151.2" x="680.4" y="576.675"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="67.2" x="722.4" y="593.9016">«application»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="140" x="686" y="607.9891">CourseManagementService</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="60.8" x="910.4" y="28.8"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="49.6" x="916" y="46.0266">«domain»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="36.8" x="922.4" y="60.1141">Course</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="60.8" x="910.4" y="576.675"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="49.6" x="916" y="593.9016">«domain»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="36.8" x="922.4" y="607.9891">Course</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="63.2" x="992" y="52.4266">«repository»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="88.8" x="979.2" y="66.5141">courseRepository</text><path d="M1011.6,12 C1011.6,4 1026,4 1026,4 C1026,4 1040.4,4 1040.4,12 L1040.4,32.8 C1040.4,40.8 1026,40.8 1026,40.8 C1026,40.8 1011.6,40.8 1011.6,32.8 L1011.6,12 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M1011.6,12 C1011.6,20 1026,20 1026,20 C1026,20 1040.4,20 1040.4,12 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="FG Virgil" font-size="11.2" font-style="italic" lengthAdjust="spacing" textLength="63.2" x="992" y="588.3016">«repository»</text><text fill="#000000" font-family="FG Virgil" font-size="11.2" lengthAdjust="spacing" textLength="88.8" x="979.2" y="602.3891">courseRepository</text><path d="M1011.6,612.85 C1011.6,604.85 1026,604.85 1026,604.85 C1026,604.85 1040.4,604.85 1040.4,612.85 L1040.4,633.65 C1040.4,641.65 1026,641.65 1026,641.65 C1026,641.65 1011.6,641.65 1011.6,633.65 L1011.6,612.85 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M1011.6,612.85 C1011.6,620.85 1026,620.85 1026,620.85 C1026,620.85 1040.4,620.85 1040.4,612.85 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><rect fill="#FFFFFF" height="468.2188" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="149.6" y="94.8563"/><rect fill="#FFFFFF" height="419.6563" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="292" y="143.4188"/><rect fill="#FFFFFF" height="24" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="611.2" y="167.7"/><rect fill="#FFFFFF" height="24" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="611.2" y="408.35"/><rect fill="#FFFFFF" height="330.0125" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="752" y="240.2625"/><rect fill="#FFFFFF" height="11.2" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1022" y="264.5438"/><rect fill="#FFFFFF" height="11.2" style="stroke:#181818;stroke-width:0.8000000000000002;" width="8" x="1022" y="505.1938"/><polygon fill="#181818" points="140,91.6563,148,94.8563,140,98.0563,143.2,94.8563" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="28.8" x2="144.8" y1="94.8563" y2="94.8563"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="105.6" x="34.4" y="90.9711">Open Enrolls in course</text><polygon fill="#181818" points="286.4,115.9375,294.4,119.1375,286.4,122.3375,289.6,119.1375" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="157.6" x2="291.2" y1="119.1375" y2="119.1375"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="28.8" x="163.2" y="115.2523">create</text><polygon fill="#181818" points="282.4,140.2188,290.4,143.4188,282.4,146.6188,285.6,143.4188" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="157.6" x2="287.2" y1="143.4188" y2="143.4188"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="78.4" x="163.2" y="139.5336">openedCourses()</text><polygon fill="#181818" points="601.6,164.5,609.6,167.7,601.6,170.9,604.8,167.7" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="300" x2="606.4" y1="167.7" y2="167.7"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="296" x="305.6" y="163.8148">ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)</text><polygon fill="#181818" points="746.4,212.7813,754.4,215.9813,746.4,219.1813,749.6,215.9813" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="300" x2="751.2" y1="215.9813" y2="215.9813"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="28.8" x="305.6" y="212.0961">create</text><polygon fill="#181818" points="742.4,237.0625,750.4,240.2625,742.4,243.4625,745.6,240.2625" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="300" x2="747.2" y1="240.2625" y2="240.2625"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="78.4" x="305.6" y="236.3773">openedCourses()</text><polygon fill="#181818" points="1012.4,261.3438,1020.4,264.5438,1012.4,267.7438,1015.6,264.5438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="760" x2="1017.2" y1="264.5438" y2="264.5438"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="180.8" x="765.6" y="260.6586">openedCourses = findByOpenedState()</text><polygon fill="#181818" points="768.8,272.5438,760.8,275.7438,768.8,278.9438,765.6,275.7438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="764" x2="1025.2" y1="275.7438" y2="275.7438"/><polygon fill="#181818" points="308.8,283.7438,300.8,286.9438,308.8,290.1438,305.6,286.9438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="304" x2="751.2" y1="286.9438" y2="286.9438"/><polygon fill="#181818" points="166.4,308.025,158.4,311.225,166.4,314.425,163.2,311.225" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="161.6" x2="291.2" y1="311.225" y2="311.225"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="72" x="171.2" y="307.3398">openedCourses</text><polygon fill="#181818" points="37.6,332.3063,29.6,335.5063,37.6,338.7063,34.4,335.5063" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="32.8" x2="148.8" y1="335.5063" y2="335.5063"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="90.4" x="42.4" y="331.6211">list opened courses</text><polygon fill="#181818" points="140,356.5875,148,359.7875,140,362.9875,143.2,359.7875" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="28.8" x2="144.8" y1="359.7875" y2="359.7875"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="68" x="34.4" y="355.9023">selects course</text><polygon fill="#181818" points="282.4,380.8688,290.4,384.0688,282.4,387.2688,285.6,384.0688" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="157.6" x2="287.2" y1="384.0688" y2="384.0688"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="115.2" x="163.2" y="380.1836">openEnrollments(course)</text><polygon fill="#181818" points="601.6,405.15,609.6,408.35,601.6,411.55,604.8,408.35" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="300" x2="606.4" y1="408.35" y2="408.35"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="296" x="305.6" y="404.4648">ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)</text><polygon fill="#181818" points="742.4,453.4313,750.4,456.6313,742.4,459.8313,745.6,456.6313" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="300" x2="747.2" y1="456.6313" y2="456.6313"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="115.2" x="305.6" y="452.7461">openEnrollments(course)</text><polygon fill="#181818" points="931.2,477.7125,939.2,480.9125,931.2,484.1125,934.4,480.9125" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="760" x2="936" y1="480.9125" y2="480.9125"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="161.6" x="765.6" y="477.0273">enroll(CurrentTimeCalendars.now())</text><polygon fill="#181818" points="1012.4,501.9938,1020.4,505.1938,1012.4,508.3938,1015.6,505.1938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="760" x2="1017.2" y1="505.1938" y2="505.1938"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="58.4" x="765.6" y="501.3086">save(course)</text><polygon fill="#181818" points="768.8,513.1938,760.8,516.3938,768.8,519.5938,765.6,516.3938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="764" x2="1025.2" y1="516.3938" y2="516.3938"/><polygon fill="#181818" points="308.8,524.3938,300.8,527.5938,308.8,530.7938,305.6,527.5938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="304" x2="751.2" y1="527.5938" y2="527.5938"/><polygon fill="#181818" points="166.4,535.5938,158.4,538.7938,166.4,541.9938,163.2,538.7938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="161.6" x2="291.2" y1="538.7938" y2="538.7938"/><polygon fill="#181818" points="37.6,559.875,29.6,563.075,37.6,566.275,34.4,563.075" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="32.8" x2="152.8" y1="563.075" y2="563.075"/><text fill="#000000" font-family="FG Virgil" font-size="10.4" lengthAdjust="spacing" textLength="80.8" x="42.4" y="559.1898">displays success</text><!--MD5=[06502c52a6cc8f62a996859fb1b90080]
@startuml
'http://plantuml.com/skinparam.html
skinparam handwritten false
skinparam packageStyle rect
skinparam defaultFontName FG Virgil
skinparam shadowing false

actor Manager as Actor
participant OpenEnrollmentsUI as UI <<presentation>>
participant OpenEnrollmentsController as Controller <<application>>
participant AuthorizationService  as authz <<application>>
participant CourseManagementService as courseSvc <<application>>

participant Course as course <<domain>>

database courseRepository as Repository <<repository>>


Actor - -> UI: Open Enrolls in course
activate UI
    UI -> Controller: create

    UI -> Controller: openedCourses()
    activate Controller

        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
        activate authz
        deactivate authz
        Controller - -> courseSvc : create


Controller -> courseSvc : openedCourses()
 activate courseSvc

            courseSvc -> Repository: openedCourses = findByOpenedState()
            activate Repository

            Repository - -> courseSvc
            deactivate Repository
            courseSvc - -> Controller
            Controller - -> UI : openedCourses





        UI- ->Actor: list opened courses

        Actor - -> UI : selects course
        UI -> Controller : openEnrollments(course)
        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
                activate authz
                deactivate authz
        Controller -> courseSvc : openEnrollments(course)
        courseSvc ->  course : enroll(CurrentTimeCalendars.now())
        courseSvc ->  Repository : save(course)
        activate Repository
        Repository - -> courseSvc
        deactivate Repository
         courseSvc - ->  Controller
         Controller - -> UI
         UI - -> Actor : displays success

         deactivate Controller
deactivate UI
@enduml

@startuml
skinparam handwritten false
skinparam packageStyle rect
skinparam defaultFontName FG Virgil
skinparam shadowing false

actor Manager as Actor
participant OpenEnrollmentsUI as UI <<presentation>>
participant OpenEnrollmentsController as Controller <<application>>
participant AuthorizationService  as authz <<application>>
participant CourseManagementService as courseSvc <<application>>

participant Course as course <<domain>>

database courseRepository as Repository <<repository>>


Actor - -> UI: Open Enrolls in course
activate UI
    UI -> Controller: create

    UI -> Controller: openedCourses()
    activate Controller

        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
        activate authz
        deactivate authz
        Controller - -> courseSvc : create


Controller -> courseSvc : openedCourses()
 activate courseSvc

            courseSvc -> Repository: openedCourses = findByOpenedState()
            activate Repository

            Repository - -> courseSvc
            deactivate Repository
            courseSvc - -> Controller
            Controller - -> UI : openedCourses





        UI- ->Actor: list opened courses

        Actor - -> UI : selects course
        UI -> Controller : openEnrollments(course)
        Controller -> authz: ensureAuthenticatedcourseHasAnyOf(ADMIN, POWER_course)
                activate authz
                deactivate authz
        Controller -> courseSvc : openEnrollments(course)
        courseSvc ->  course : enroll(CurrentTimeCalendars.now())
        courseSvc ->  Repository : save(course)
        activate Repository
        Repository - -> courseSvc
        deactivate Repository
         courseSvc - ->  Controller
         Controller - -> UI
         UI - -> Actor : displays success

         deactivate Controller
deactivate UI
@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>